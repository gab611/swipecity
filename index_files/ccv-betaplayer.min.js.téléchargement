var com$adobe$ccv$util;
(function(e){var f=function(){function b(){}b.prototype.generateRandomString=function(a){for(var c="",d=0;d<a;d++)var b=Math.floor(61*Math.random()),c=c+"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".substring(b,b+1);return c};b.prototype.formatDoubleDigit=function(a){return 10>a?"0"+a:String(a)};b.prototype.formatTime=function(a){a=Math.round(a);var c=0,d=0;if(isFinite(a)&&0<a){for(;59<a;)d++,a-=60;for(;59<d;)c++,d-=60;return 0<c?c+":"+this.formatDoubleDigit(d)+":"+this.formatDoubleDigit(a):
d+":"+this.formatDoubleDigit(a)}return"0:00"};b.prototype.getExtension=function(a){var c=a.lastIndexOf(".");return a.substr(c+1,a.length)};b.prototype.getPrefix=function(a){return a.substring(0,a.indexOf("://"))};b.prototype.getFilename=function(a){return a.substr(a.lastIndexOf("/")+1)};b.prototype.reverse=function(a){return null===a?"":a.split("").reverse().join("")};b.prototype.reverseWords=function(a){return null===a?"":a.split(/\s+/).reverse().join(" ")};b.prototype.stripExtension=function(a){var c=
this.getExtension(a).length;return a.substr(0,a.length-(c+1))};b.prototype.getPart=function(a,c,d){a=a.split(c);return d>a.length?null:a[d]};b.prototype.insert=function(a,c,d){a=a.split(c);return a[0]+d+a[1]};return b}();e.StringUtilStatic=f})(com$adobe$ccv$util||(com$adobe$ccv$util={}));
var StringUtil=new com$adobe$ccv$util.StringUtilStatic,StringUtil=StringUtil||null,__extends=this&&this.__extends||function(e,f){function b(){this.constructor=e}for(var a in f)f.hasOwnProperty(a)&&(e[a]=f[a]);e.prototype=null===f?Object.create(f):(b.prototype=f.prototype,new b)},com$adobe$ccv$app;
(function(e){var f=function(){function b(a,c){void 0===a&&(a=null);void 0===c&&(c=window);this._internalKeys={status:!0,test_poster:!0,rootdir:!0};this._configKeys="theme debug log_info log_warn log_debug log_error plugins bgcolor locale clientid bgcolor".split(" ");this._defaultConfigValues={status:"ok",rootdir:"",theme:"default",debug:"false",log_info:"true",log_warn:"true",log_debug:"true",log_error:"true",plugins:null,bgcolor:"#000000",locale:"en",clientid:"default",minframeWidth:"480",minframeHeight:"360",
useDASH:"false"};this._element=a;this._win=c;this._defaultConfigValues.plugins=b.getQueryValue("plugins",c)}b.prototype._error=function(a){"undefined"!=typeof console&&console.error&&console.error("Configuration: "+a)};b.prototype._getParamsConfigProperty=function(a,c){switch(c){case "rootdir":return a.rootdir;case "theme":return a.theme}return null};b.prototype._getDebugConfigProperty=function(a,c){switch(c){case "debug":return a.debug;case "log_info":return a.log_info;case "log_warn":return a.log_warn;
case "log_debug":return a.log_debug;case "log_error":return a.log_error}return null};b.prototype._getClientConfigProperty=function(a,c){switch(c){case "bgcolor":return a.bgcolor;case "clientid":return a.clientid;case "locale":return a.locale;case "plugins":return a.plugins;case "url":return a.url;case "poster":return a.poster;case "minframeWidth":return a.minframeWidth;case "minframeHeight":return a.minframeHeight;case "useDASH":return a.useDASH}return null};b.prototype._getConfigProperty=function(a,
c){var d=this._getParamsConfigProperty(a,c);d||(d=this._getDebugConfigProperty(a,c));d||(d=this._getClientConfigProperty(a,c));return d};b.prototype._setParamsConfigProperty=function(a,c,d){switch(c){case "rootdir":return a.rootdir=d,!0;case "theme":return a.theme=d,!0}return!1};b.prototype._setDebugConfigProperty=function(a,c,d){switch(c){case "debug":return a.debug=d,!0;case "log_info":return a.log_info=d,!0;case "log_warn":return a.log_warn=d,!0;case "log_debug":return a.log_debug=d,!0;case "log_error":return a.log_error=
d,!0}return!1};b.prototype._setClientConfigProperty=function(a,c,d){switch(c){case "bgcolor":return a.bgcolor=d,!0;case "clientid":return a.clientid=d,!0;case "locale":return a.locale=d,!0;case "plugins":return a.plugins=d,!0;case "url":return a.url=d,!0;case "poster":return a.poster=d,!0;case "minframeWidth":return a.minframeWidth=d,!0;case "minframeHeight":return a.minframeHeight=d,!0;case "useDASH":return a.useDASH=d,!0}return!1};b.prototype._setConfigProperty=function(a,c,d){(a=this._setParamsConfigProperty(a,
c,d)||this._setDebugConfigProperty(a,c,d)||this._setClientConfigProperty(a,c,d))||this._error("_setConfigProperty: unknown property '"+c+"'");return a};b._getValueFromQueryString=function(a,c){var d="undefined"!=typeof c&&c.location.search.substr(1).split("&");if(""!=a&&d&&0<d.length)for(var b=0;b<d.length;++b){var h=d[b].split("=");if(2==h.length&&h[0]==a)return decodeURIComponent(h[1].replace(/\+/g," "))}};b.prototype.getConfigValue=function(a,c){var d=this._element,d=d?d.data(a):null;if("number"==
typeof d||"boolean"==typeof d)d=""+d;d&&d.length||(d=b._getValueFromQueryString(a,this._win),"undefined"!=typeof d&&d&&d.length||(d=b._getValueFromQueryString(this.getPrefix()+a,this._win),"undefined"!==typeof d&&d&&d.length||(d=c?c:this._getConfigProperty(this._defaultConfigValues,a)),d||(d="")));return d};b.prototype.isConfigOptionEnabled=function(a){return"true"==this.getConfigValue(a,"false").toLocaleLowerCase()};b.prototype.getDataValue=function(a){var c=this._element;return c?c.data(a):null};
b.getQueryValue=function(a,c){void 0===c&&(c=window);return b._getValueFromQueryString(a,c)};b.prototype.setConfigValue=function(a,c){this._setConfigProperty(this._defaultConfigValues,a,c)};b.prototype.getPrefix=function(){return"adobe."};b.prototype.isInternalConfigKey=function(a){return this._internalKeys[a]};b.prototype.getConfigKeys=function(){return this._configKeys.slice()};b.prototype._applySettings=function(a){if(a){var c=this._defaultConfigValues,d=a.params;d&&(c.rootdir=d.rootdir||c.rootdir,
c.theme=d.theme||c.theme);if(d=a.debugging)c.debug=d.debug||c.debug,c.log_info=d.log_info||c.log_info,c.log_warn=d.log_warn||c.log_warn,c.log_debug=d.log_debug||c.log_debug,c.log_error=d.log_error||c.log_error;if(a=a.client)c.bgcolor=a.bgcolor||c.bgcolor,c.clientid=a.clientid||c.clientid,c.locale=a.locale||c.locale,c.plugins=a.plugins||c.plugins}};b.prototype.loadSettings=function(a){function c(a){b._applySettings(a);d.resolve(a)}var d=$.Deferred(),b=this;window.ccv$serverData&&window.ccv$serverData.settings?
c(window.ccv$serverData.settings):jQuery.getJSON(a,function(a,k,b){200==b.status?c(a):d.reject()}).fail(function(){d.reject()});return d.promise()};b.prototype.hasData=function(a){return this._defaultConfigValues.hasOwnProperty(a)};return b}();e.Configuration=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));var Configuration=function(e){function f(){e.apply(this,arguments)}__extends(f,e);return f}(com$adobe$ccv$app.Configuration),LOGGING="undefined"==typeof RELEASE||!RELEASE,com$adobe$ccv$logging;
(function(e){(function(a){a[a.LEVEL_DISABLED=0]="LEVEL_DISABLED";a[a.LEVEL_INFO=1]="LEVEL_INFO";a[a.LEVEL_DEBUG=2]="LEVEL_DEBUG";a[a.LEVEL_WARN=4]="LEVEL_WARN";a[a.LEVEL_ERROR=8]="LEVEL_ERROR";a[a.LEVEL_ALL=15]="LEVEL_ALL"})(e.LOG_LEVEL||(e.LOG_LEVEL={}));var f=e.LOG_LEVEL,b=function(){function a(){this._logger=[];this._configuration=new com$adobe$ccv$app.Configuration}a.prototype._getLogLevel=function(){if(LOGGING&&"true"==this._configuration.getConfigValue("debug")){var a=f.LEVEL_DISABLED;"true"==
this._configuration.getConfigValue("log_info")&&(a|=f.LEVEL_INFO);"true"==this._configuration.getConfigValue("log_debug")&&(a|=f.LEVEL_DEBUG);"true"==this._configuration.getConfigValue("log_warn")&&(a|=f.LEVEL_WARN);"true"==this._configuration.getConfigValue("log_error")&&(a|=f.LEVEL_ERROR);return a}return f.LEVEL_DISABLED};a.prototype._isEnabled=function(){return this._getLogLevel()!=f.LEVEL_DISABLED};a.prototype.setConfiguration=function(a){this._configuration=a};a.prototype.addLogger=function(a){this._logger.push(a)};
a.prototype.removeLogger=function(a){this._isEnabled()&&(a=this._logger.indexOf(a),0<=a&&this._logger.splice(a,1))};a.prototype.setCapacity=function(a){if(this._isEnabled())for(var d=this._logger.length,b=0;b<d;++b)this._logger[b].setCapacity(a)};a.prototype.clear=function(){if(this._isEnabled())for(var a=this._logger.length,d=0;d<a;++d)this._logger[d].clear()};a.prototype.info=function(a,d){if(this._getLogLevel()&f.LEVEL_INFO)for(var b=this._logger.length,h=0;h<b;++h)this._logger[h].info(a,d)};a.prototype.debug=
function(a,d){if(this._getLogLevel()&f.LEVEL_DEBUG)for(var b=this._logger.length,h=0;h<b;++h)this._logger[h].debug(a,d)};a.prototype.warn=function(a,d){if(this._getLogLevel()&f.LEVEL_WARN)for(var b=this._logger.length,h=0;h<b;++h)this._logger[h].warn(a,d)};a.prototype.error=function(a,d){if(window.hasOwnProperty("NREUM"))try{throw Error([a,": ",d].join(""));}catch(b){window.NREUM.noticeError(b)}if(this._getLogLevel()&f.LEVEL_ERROR)for(var h=this._logger.length,k=0;k<h;++k)this._logger[k].error(a,
d)};return a}();e.LogStatic=b})(com$adobe$ccv$logging||(com$adobe$ccv$logging={}));var LogStatic=new com$adobe$ccv$logging.LogStatic,Log=LogStatic,Log=Log||null,com$adobe$ccv$localization;
(function(e){var f=function(){function b(){this._LOGTAG="StringSet"}b.prototype.getString=function(a){return this._strings&&this._strings[a]?this._strings[a]:a};b.prototype.loadStrings=function(a){function c(a){b._strings=a;d.resolve(a)}var d=$.Deferred(),b=this;window.ccv$serverData&&window.ccv$serverData.strings?c(window.ccv$serverData.strings):jQuery.getJSON(a,function(h,k,m){200==m.status?(LOGGING&&Log.info(b._LOGTAG,"loadStrings: successfully loaded "+a),c(h)):(LOGGING&&Log.error(b._LOGTAG,"loadStrings: failed to load "+
a),d.reject())}).fail(function(){d.reject()});return d.promise()};b.getString=function(a){return b.instance.getString(a)};b.loadStrings=function(a){return b.instance.loadStrings(a)};b.instance=new b;return b}();e.StringSet=f})(com$adobe$ccv$localization||(com$adobe$ccv$localization={}));
(function(e){var f=function(){function b(a,c,d,b,h,k){void 0===k&&(k=null);var m=$(document.createElement("div"));m.addClass(a);a=$(document.createElement("div"));a.addClass("message-background");m.append(a);a=$(document.createElement("span"));a.addClass("message");m.append(a);var t=$(document.createElement("p"));t.addClass("title");a.append(t);if(c&&c.length){var e=$(document.createElement("img"));e.addClass(d);e.attr("src",c);k&&k.length?(c=$(document.createElement("a")),c.attr("href",k),c.attr("target",
"_blank"),c.append(e),t.append(c)):t.append(e)}t.append(b);if(h){b=$(document.createElement("p"));b.addClass("subtitle");h=h.split("\n");for(k=0;k<h.length;++k)b.append(h[k]),b.append($(document.createElement("br")));a.append(b)}this._msg=m}b.prototype.showMsg=function(a){a=a.find(".message-container");a.css("display","block");this._msg.appendTo(a);this._msg.css("display","block");$("#spinner-control").css("visibility","hidden");$("#startcover").css("visibility","hidden")};b.prototype.hideMsg=function(){this._msg.parent().css("display",
"none");this._msg.css("display","none").remove();$("#spinner-control").css("visibility","visible");$("#startcover").css("visibility","visible")};b.prototype.getMsgText=function(){return this._msg.find(".title").text()};b.prototype.getMsgDiv=function(){return this._msg};return b}();e.Message=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));
(function(e){var f=function(){function b(a){this._rootdir=a}b.prototype.getErrorMsg=function(){null==this._errorMsg&&(this._errorMsg=new e.Message("error-occurred-message",this._rootdir+"img/Failed.png","Failed.png",com$adobe$ccv$localization.StringSet.getString("%error_has_occurred"),com$adobe$ccv$localization.StringSet.getString("%error_has_occurred_sub")));return this._errorMsg};b.prototype.getNetworkErrorMsg=function(){null==this._errorMsg&&(this._errorMsg=new e.Message("network-error-message",
null,null,com$adobe$ccv$localization.StringSet.getString("Network not available"),com$adobe$ccv$localization.StringSet.getString("Please check your network connection")));return this._errorMsg};b.prototype.getInvalidMsg=function(){null==this._invalidMsg&&(this._invalidMsg=new e.Message("invalid-video-message",this._rootdir+"img/Failed.png","Failed.png",com$adobe$ccv$localization.StringSet.getString("%invalid_video"),com$adobe$ccv$localization.StringSet.getString("%invalid_video_sub")));return this._invalidMsg};
b.prototype.getBadAssetMsg=function(){null==this._badAssetMsg&&(this._badAssetMsg=new e.Message("bad-video-message",this._rootdir+"img/Failed.png","Failed.png",com$adobe$ccv$localization.StringSet.getString("%bad_video"),com$adobe$ccv$localization.StringSet.getString("%bad_video_sub")));return this._badAssetMsg};b.prototype.getRemovedMsg=function(){null==this._removedMsg&&(this._removedMsg=new e.Message("removed-video-message",this._rootdir+"img/Failed.png","Failed.png",com$adobe$ccv$localization.StringSet.getString("%removed_video"),
com$adobe$ccv$localization.StringSet.getString("%removed_video_sub")));return this._removedMsg};b.prototype.getReloadMsg=function(){null==this._reloadMsg&&(this._reloadMsg=new e.Message("removed-video-message",this._rootdir+"img/Failed.png","Failed.png",com$adobe$ccv$localization.StringSet.getString("%reload_video"),com$adobe$ccv$localization.StringSet.getString("%reload_video_sub")));return this._reloadMsg};b.prototype.getFlashPlayerMsg=function(){null==this._flashPlayerMsg&&(this._flashPlayerMsg=
new e.Message("enable-flash-player-message",this._rootdir+"img/Failed.png","Failed.png",com$adobe$ccv$localization.StringSet.getString("%enable_flash_player"),com$adobe$ccv$localization.StringSet.getString("%enable_flash_player_sub")));return this._flashPlayerMsg};b.prototype.hideMessages=function(){this._errorMsg&&this._errorMsg.hideMsg();this._invalidMsg&&this._invalidMsg.hideMsg();this._badAssetMsg&&this._badAssetMsg.hideMsg();this._removedMsg&&this._removedMsg.hideMsg();this._reloadMsg&&this._reloadMsg.hideMsg();
this._flashPlayerMsg&&this._flashPlayerMsg.hideMsg()};b.getInstance=function(a){null==e.ErrorMessages.instance&&(b.instance=new e.ErrorMessages(a));return b.instance};return b}();e.ErrorMessages=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));var com$adobe$ccv$tasks;
(function(e){var f=function(){function b(){this.deferred=$.Deferred();this.waitForMS=100;this._initDone=!1}b.prototype.initTask=function(){this.deferred.resolve(this)};b.prototype.isReady=function(){return!0};b.prototype.run=function(){function a(){c.isReady()?(clearInterval(d),c._initDone||(c._initDone=!0,c.initTask())):d=setTimeout(a,c.waitForMS)}var c=this,d;a();return this.deferred.promise()};return b}();e.Task=f})(com$adobe$ccv$tasks||(com$adobe$ccv$tasks={}));
var Task=function(e){function f(){e.apply(this,arguments)}__extends(f,e);return f}(com$adobe$ccv$tasks.Task);
(function(e){var f=function(b){function a(){b.call(this);this.maxAttempts=-1}__extends(a,b);a.prototype.initTask=function(){this.deferred.resolve(this)};a.prototype.isReady=function(){0<=this.maxAttempts&&++this._attempts>this.maxAttempts&&this.deferred.reject(this.element);return this.element.parents("body").length?this.waitForID?0<this.element.find("#"+this.waitForID).length:!0:!1};a.prototype.attachToElement=function(a,d){void 0===d&&(d=null);this.element=a;this.waitForID=d;this._attempts=0;return b.prototype.run.call(this)};
return a}(e.Task);e.DivTask=f})(com$adobe$ccv$tasks||(com$adobe$ccv$tasks={}));var DivTask=function(e){function f(){e.apply(this,arguments)}__extends(f,e);return f}(com$adobe$ccv$tasks.DivTask);
(function(e){var f=function(){function b(){}b.COMMAND_ATTACH="ccv:attach";b.COMMAND_SETPOSTER="ccv:setposter";b.COMMAND_SETLOCALE="ccv:setlocale";b.DEFAULT_FAST_FORWARD=20;b.DEFAULT_FAST_BACKWARD=20;b.DEFAULT_SPINNER_WIDTH=32;b.DEFAULT_SPINNER_HEIGHT=32;b.DEFAULT_HOST="http://ww.ccv.adobe.com";b.WWW_API_MANIFEST_ENDPOINT="/v1/player/api/ManifestProxy";b.WWW_PROXY_PLAYBACK_QUERY="playbackURI";b.WWW_PROXY_TOKEN_QUERY="token";b.EMBED_URL_EXP="^/v1/player/(.*)/embed$";b.API_ROOT="/v1/player/";b.CONVERSION_INFO_QUERY=
"/info?options=status,posterframe";b.BRIGHTCOVE_PLAYER_SELECTOR="#brightcovePlayer";b.STATUS_OK="ok";b.STATUS_GEN_POSTER="generating_poster";b.STATUS_GEN_PLAYLIST="generating_playlist";b.STATUS_ERROR="error";b.STATUS_INVALID="invalid";b.STATUS_REMOVED="removed";b.STATUS_BAD_ASSET="badasset";b.HELPER_NAME="com$adobe$ccv$brightcove";b.BAD_PARAMS_CODE=400;b.INVALID_ID_CODE=404;b.CONFLICT_CODE=409;b.REASON_HEADER_KEY="reason";b.BAD_ASSET_REASON="BAD_ASSET";b.PROCESSING_REASON="PROCESSING";b.REMOVED_REASON=
"REMOVED";b.DEFAULT_SETTINGS_JSON="json/default/config.json";b.DEFAULT_STRINGS_JSON="json/default/en.json";b.WWW_SERVICE_POLL_WAIT=5E3;b.BRIGHTCOVE_PLUGIN_NAME="BCHelperPlugin";b.ENV_DEV="dev";b.ENV_PROD="prod";b.ENV_STAGE="stage";return b}();e.Constants=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));
(function(e){var f=function(){function b(a,c){this._videoID=a;this._authToken=c}b.prototype._loadSrc=function(){this._loaded=!1;this._loadTimer=0;var a=e.Constants.API_ROOT+this._videoID+"/posterframe";this._authToken&&(a+="?Authorization="+this._authToken);this._img.attr("src",a);return this};b.prototype.addPoster=function(a){var c=this;this._poster=a.find("#html5-video-poster");this._poster.css("display","none");this._img=$(document.createElement("img")).addClass("poster");this._img.on("load",function(a){LOGGING&&
Log.info(b._LOGTAG,"addPoster: poster has been successfully loaded");c._loaded=!0;c._shouldShow&&c.showPoster()});this._img.on("error",function(a){LOGGING&&Log.info(b._LOGTAG,"addPoster: fetching poster failed, retrying in "+e.Constants.WWW_SERVICE_POLL_WAIT+"ms");c._loadTimer=setTimeout(jQuery.proxy(c._loadSrc,c),e.Constants.WWW_SERVICE_POLL_WAIT)});this._loadSrc();this._poster.append(this._img);return this};b.prototype.showPoster=function(){if(!this._loaded)return this._shouldShow=!0,this;var a=
this._poster.parent().width(),c=this._poster.parent().height(),d=this._poster.find("img"),b=d.get(0),h=b.width,k=b.height,b=a,m=c;if(b!=h||m!=k)m=a/h*k,m>c&&(m=c,b=c/k*h);a=a/2-b/2;d.css("top",(c/2-m/2).toString()+"px");d.css("left",a.toString()+"px");d.css("width",b.toString()+"px");d.css("height",m.toString()+"px");this._poster.css("display","block");return this};b.prototype.hidePoster=function(){LOGGING&&Log.info(b._LOGTAG,"hidePoster");this._shouldShow=!1;this._loadTimer&&(clearTimeout(this._loadTimer),
this._loadTimer=0);this._poster.css("display","none");return this};b._LOGTAG="Poster";return b}();e.Poster=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));
(function(e){var f=function(b){function a(a,d,g,h){this._LOGTAG="ConversionMonitor";this.app=a;this.posterShown=!1;this.width=d;this.height=g;this.poster=h;this.msg=new e.Message("conversion-in-progress-message",this.app.rootdir+"/img/Spinner.gif","spinner",com$adobe$ccv$localization.StringSet.getString("%conversion_in_progress"),com$adobe$ccv$localization.StringSet.getString("%conversion_in_progress_sub"));b.call(this)}__extends(a,b);a.prototype.initTask=function(){this.msg.hideMsg();if(this.app.status==
e.Constants.STATUS_OK)this.deferred.resolve(this);else{var a;a=this.app.status==e.Constants.STATUS_INVALID?e.ErrorMessages.getInstance(this.app.rootdir).getInvalidMsg():this.app.status==e.Constants.STATUS_BAD_ASSET?e.ErrorMessages.getInstance(this.app.rootdir).getBadAssetMsg():this.app.status==e.Constants.STATUS_REMOVED?e.ErrorMessages.getInstance(this.app.rootdir).getRemovedMsg():e.ErrorMessages.getInstance(this.app.rootdir).getErrorMsg();a.showMsg(this.element);LOGGING&&Log.error(this._LOGTAG,a.getMsgText());
this.posterShown&&this.poster.hidePoster();this.deferred.reject(this.element)}};a.prototype.isReady=function(){var a;this.app.status!=e.Constants.STATUS_GEN_POSTER&&this.app.status!=e.Constants.STATUS_GEN_PLAYLIST?a=!0:(this.checkStatus(),a=!1);return a};a.prototype.attachTo=function(a){this.waitForMS=e.Constants.WWW_SERVICE_POLL_WAIT;this.msg.showMsg(a);return b.prototype.attachToElement.call(this,a)};a.prototype.removeFrom=function(a){this.poster.hidePoster();this.msg.hideMsg()};a.prototype.checkStatus=
function(){var a=this;this.app.getAuthorizedJSON(e.Constants.API_ROOT+this.app.videoID+e.Constants.CONVERSION_INFO_QUERY).then(function(d,b,h){LOGGING&&Log.info(a._LOGTAG,"ConversionMonitor: got info");a.app.status=d.status;a.app.status!=e.Constants.STATUS_GEN_PLAYLIST||a.posterShown||(a.poster.showPoster(),a.posterShown=!0)},function(d,b,h){b=d.status;d=d.getResponseHeader(e.Constants.REASON_HEADER_KEY);LOGGING&&Log.info(a._LOGTAG,"ConversionMonitor: error getting info");a.app.status=b==e.Constants.INVALID_ID_CODE?
e.Constants.STATUS_INVALID:b==e.Constants.CONFLICT_CODE?d==e.Constants.PROCESSING_REASON?e.Constants.STATUS_GEN_POSTER:d==e.Constants.REMOVED_REASON?e.Constants.STATUS_REMOVED:d==e.Constants.BAD_ASSET_REASON?e.Constants.STATUS_BAD_ASSET:e.Constants.STATUS_ERROR:e.Constants.STATUS_ERROR})};return a}(DivTask);e.ConversionMonitor=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));
(function(e){var f=function(){function b(){this._LOGTAG="Settings"}b.prototype.load=function(a,c){void 0===c&&(c=null);var d=$.Deferred(),b=this;c=c||a.getConfigValue("rootdir");var h=a.getConfigValue("clientid").toLowerCase(),k=c+"json/"+h+"/config.json";a.loadSettings(k).done(function(){LOGGING&&Log.info(b._LOGTAG,"Settings successfully loaded "+k)}).fail(function(){var d=c+"json/default/config.json";d!=k&&(LOGGING&&Log.error(b._LOGTAG,"Settings failed to load "+k+" loading default "+d),a.loadSettings(d).done(function(){LOGGING&&
Log.info(b._LOGTAG,"Settings default successfully loaded "+d)}).fail(function(){LOGGING&&Log.error(b._LOGTAG,"Settings default failed to load "+d)}))}).always(function(){b._loadStrings(a,c,h).done(function(){d.resolve(a)}).fail(function(){d.reject(a)})});return d.promise()};b.prototype._loadStrings=function(a,c,d){var b=$.Deferred(),h=this,k=c+a.getConfigValue("strings_json");com$adobe$ccv$localization.StringSet.loadStrings(k).done(function(){LOGGING&&Log.info(h._LOGTAG,"Strings successfully loaded "+
k);b.resolve(a)}).fail(function(){LOGGING&&Log.error(h._LOGTAG,"Strings failed to load "+k);b.reject(a)});return b.promise()};return b}();e.Settings=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));
(function(e){var f=function(){function b(){this._LOGTAG="PlayerApp"}b.prototype._getRootDir=function(a){var c=a.getConfigValue("rootdir");0==c.indexOf("/")?(a=window.location.protocol+"//"+window.location.host)&&(a+=c):a.hasData("rootdir")?a=a.getDataValue("rootdir"):(a=window.location.href.split("?")[0],a=a.substring(0,a.lastIndexOf("/")+1));a||(a="/"+c);"/"!=a[a.length-1]&&(a+="/");return a};b.prototype.createConfiguration=function(a){this.element=a;this.config=new e.Configuration(this.element);
LOGGING&&LogStatic.setConfiguration(this.config);this.videoID=(a=(new RegExp(e.Constants.EMBED_URL_EXP)).exec(window.location.pathname))&&2==a.length?a[1]:this.config.getConfigValue("videoID");this.ccvID=this.config.getDataValue("ccvid");this.status=this.config.getDataValue("status");LOGGING&&Log.info(this._LOGTAG,"createConfiguration: status="+this.status);this.rootdir=this._getRootDir(this.config);LOGGING&&Log.info(this._LOGTAG,"createConfiguration: rootdir="+this.rootdir);this.authToken="https:"==
window.location.protocol?e.Configuration.getQueryValue("Authorization"):null;$(window).on("resize",jQuery.proxy(this.onSizeChange,this));return this.config};b.prototype.showError=function(a){void 0===a&&(a=null);null==a&&(a=e.ErrorMessages.getInstance(this.rootdir).getErrorMsg());a.showMsg(this.element);LOGGING&&Log.error(this._LOGTAG,a.getMsgText())};b.prototype.hideErrors=function(){e.ErrorMessages.getInstance(this.rootdir).hideMessages()};b.prototype.createPlayer=function(a){return null};b.prototype._createPlayer=
function(a){var c=$.Deferred();this.createPlayer(a).done(function(a){a.onSizeChange(null);c.resolve(a)}).fail(function(){c.reject()});return c.promise()};b.prototype._processPage=function(a){var c=this,b=$.Deferred();if(this.status==e.Constants.STATUS_OK)LOGGING&&Log.info(this._LOGTAG,"processPage: STATUS_OK, creating player"),c._createPlayer(a).done(function(a){b.resolve(a)}).fail(function(){b.reject()});else if(this.status==e.Constants.STATUS_GEN_POSTER||this.status==e.Constants.STATUS_GEN_PLAYLIST){LOGGING&&
Log.info(this._LOGTAG,"processPage: STATUS_GEN_POSTER|STATUS_GEN_PLAYLIST");var g=new e.Poster(this.videoID,this.authToken);g.addPoster(a);var h=new e.ConversionMonitor(this,this.videoWidth,this.videoHeight,g);h.attachTo(a.find("#html5-video-holder")).done(function(){h.removeFrom(a.find("#html5-video-holder"));c._createPlayer(a).done(function(a){b.resolve(a)}).fail(function(){b.reject()})}).fail(function(){b.reject()})}else this.status==e.Constants.STATUS_INVALID?(LOGGING&&Log.info(this._LOGTAG,"processPage: STATUS_INVALID"),
this.showError(e.ErrorMessages.getInstance(this.rootdir).getInvalidMsg())):this.status==e.Constants.STATUS_BAD_ASSET?(LOGGING&&Log.info(this._LOGTAG,"processPage: STATUS_BAD_ASSET"),this.showError(e.ErrorMessages.getInstance(this.rootdir).getBadAssetMsg())):this.status==e.Constants.STATUS_REMOVED?(LOGGING&&Log.info(this._LOGTAG,"processPage: STATUS_REMOVED"),this.showError(e.ErrorMessages.getInstance(this.rootdir).getRemovedMsg())):(LOGGING&&Log.info(this._LOGTAG,"processPage: unknown status="+this.status),
this.showError()),b.reject();return b.promise()};b.prototype.processPage=function(a){var c=$.Deferred(),b=this;this.serverData=window.ccv$serverData;var g=this.config;(new e.Settings).load(g,this.rootdir).always(function(h){b._processPage(a).done(function(){c.resolve(b)}).fail(function(){c.reject()})});return c.promise()};b.prototype.onSizeChange=function(a){LOGGING&&Log.error(this._LOGTAG,"onSizeChange: please override")};b.prototype.getAuthorizedJSON=function(a,c){void 0===c&&(c=2E4);var b={};b.url=
a;b.type="GET";b.dataType="json";b.timeout=c;this.authToken&&(b.headers={"X-USER-TOKEN":this.authToken});return jQuery.ajax(b)};b.prototype.onFirstPlay=function(){if(this.serverData&&this.serverData.playCountBeacon){var a=this.serverData.playCountBeaconRetry||0,c=this,b=c.serverData.playCountBeacon;LOGGING&&Log.info(this._LOGTAG,"sendPlayCountBeacon: beacon sent to "+b.url);0==(b.headers&&"string"==typeof b.headers["Content-Type"]?b.headers["Content-Type"]:"").indexOf("application/json")&&b.data&&
"string"!=typeof b.data&&(b.data=JSON.stringify(b.data));var g=function(b){jQuery.ajax(b).fail(function(d,m,t){0<a&&d.status!=e.Constants.BAD_PARAMS_CODE&&(LOGGING&&Log.warn(c._LOGTAG,"sendPlayCountBeacon: retry sending beacon to "+b.url),a--,g(b))})};g(b)}};return b}();e.PlayerApp=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));var com$adobe$ccv$typekit;
(function(e){var f=function(b){function a(){b.apply(this,arguments);this._count=0}__extends(a,b);a.prototype.initTask=function(){LOGGING&&Log.info(a._LOGTAG,"Typekit loaded")};a.prototype.isReady=function(){var a=!0;try{Typekit.load()}catch(b){a=5<this._count++}return a};a._LOGTAG="LoadTypekit";return a}(Task);e.LoadTypekitStatic=f})(com$adobe$ccv$typekit||(com$adobe$ccv$typekit={}));var LoadTypekit=new com$adobe$ccv$typekit.LoadTypekitStatic,LoadTypekit=LoadTypekit||null;
(function(e){var f=function(b){function a(a){b.call(this);this.prefix=a;this.videoPosterID=a+"-video-poster";this.videoHolderID=a+"-video-holder";this.videoHeight=this.videoWidth=0}__extends(a,b);a.prototype._init=function(a,b,g,h,k,m,t){this.element=a;this.url=g;this.poster=h;this.videoWidth=k;this.videoHeight=m;this.rootFolder=t;return this.configuration=b};a.prototype.attachTo=function(a,d,g,h,k,m,t){this._init(a,d,g,h,k,m,t);return b.prototype.attachToElement.call(this,a,this.videoHolderID)};
return a}(DivTask);e.CoreCloudPlayer=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));(function(e){var f=function(){function b(){}b.getVersion=function(){return"1.0.110"};return b}();e.Version=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));
(function(e){var f=function(){function b(){this.DESKTOP_MIN_SIZE=480}b.prototype.setHtml=function(a,c){try{a.html(c)}catch(b){$(c).each(function(c,b){a.append(b)})}return a};b.prototype.now=function(){return(new Date).valueOf()};b.prototype.windowInnerWidth=function(a){void 0===a&&(a=window);var c=a.innerWidth;if(this.isIE(a)&&8==this.ieVersion(a))return $(window).width();this.isIOSDevice(a)&&(this.isIPhone(a)||this.isIPod(a))&&(a=a.innerHeight,320==a?c=480>=c?480:568:375==a?c=667:414==a&&(c=736));
return c};b.prototype.windowInnerHeight=function(a){void 0===a&&(a=window);var c=a.innerHeight;if(this.isIE(a)&&8==this.ieVersion(a))return $(window).height();this.isIOSDevice(a)&&(this.isIPhone(a)||this.isIPod(a))&&(a=a.innerWidth,480==a||568==a?c=320:667==a?c=375:736==a&&(c=414));return c};b.prototype.isTouchDevice=function(a){void 0===a&&(a=window);return a.hasOwnProperty&&(a.hasOwnProperty("ontouchstart")||a.hasOwnProperty("onmsgesturechange"))};b.prototype.isDesktopScreen=function(a){void 0===
a&&(a=window);var c=a.devicePixelRatio?a.devicePixelRatio:1,d=a.screen.width/c,g=a.screen.height/c;if(a.navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad|android)/))return!1;d=d<g?d:g;g=d>this.DESKTOP_MIN_SIZE;LOGGING&&Log.info(b._LOGTAG,"result="+g+", "+d+" > "+this.DESKTOP_MIN_SIZE+", ratio="+c+", ww="+a.screen.width+", wh="+a.screen.height);return g};b.prototype.isMobileDevice=function(a){void 0===a&&(a=window);return this.isTouchDevice(a)&&!this.isDesktopScreen(a)};b.prototype.isSafari=
function(a){void 0===a&&(a=window);var c=a.navigator.userAgent.toLowerCase();return-1==c.indexOf("safari")||-1!=c.indexOf("chrome")||this.isChromeIOS(a)||this.isAndroid(a)?!1:!0};b.prototype.isIOS=function(a){void 0===a&&(a=window);var c=a.navigator.userAgent;a=/iPhone/i.test(c);var b=/iPad/i.test(c),c=/iPod/i.test(c);return a||b||c};b.prototype.isAndroid=function(a){void 0===a&&(a=window);return-1!=a.navigator.userAgent.toLowerCase().indexOf("android")?!0:!1};b.prototype.isChromeIOS=function(a){void 0===
a&&(a=window);return/crios/.test(a.navigator.userAgent.toLowerCase())};b.prototype.isIOSDevice=function(a){void 0===a&&(a=window);return this.isSafari(a)&&this.isMobileDevice(a)||this.isChromeIOS(a)};b.prototype.isIPhone=function(a){void 0===a&&(a=window);return/iphone/.test(a.navigator.userAgent.toLowerCase())&&!this.isIPod(a)};b.prototype.isIPod=function(a){void 0===a&&(a=window);return/ipod/.test(a.navigator.userAgent.toLowerCase())};b.prototype.isFireFox=function(a){void 0===a&&(a=window);return/firefox/.test(a.navigator.userAgent.toLowerCase())};
b.prototype.isFireFoxAndroid=function(a){void 0===a&&(a=window);a=a.navigator.userAgent.toLowerCase();return/firefox/.test(a)&&-1!=a.indexOf("android")};b.prototype.isIE=function(a){void 0===a&&(a=window);return!isNaN(this.ieVersion(a))};b.prototype.isSamsungTablet=function(a){void 0===a&&(a=window);return/Galaxy.*Tab|SAMSUNG.*Tablet|Galaxy.*Tab|Android.*GT-/i.test(a.navigator.userAgent)};b.prototype.isSamsungPhone=function(a){void 0===a&&(a=window);return/Android.*SPH-[A-N]/i.test(a.navigator.userAgent)||
this.isSamsungGalaxyNote10(a)||this.isSamsungGalaxyNote3(a)||this.isSamsungGalaxyNote4(a)||this.isSamsungGalaxyTab3(a)||this.isSamsungGalaxyS5(a)};b.prototype.isSamsungGalaxyNote10=function(a){void 0===a&&(a=window);return/Android.*SM-P600/i.test(a.navigator.userAgent)};b.prototype.isSamsungGalaxyNote4=function(a){void 0===a&&(a=window);return/Android.*SM-N910H/i.test(a.navigator.userAgent)};b.prototype.isSamsungGalaxyNote3=function(a){void 0===a&&(a=window);return/Android.*SM-N900P/i.test(a.navigator.userAgent)};
b.prototype.isSamsungGalaxyTab3=function(a){void 0===a&&(a=window);return/Android.*SM-T210R/i.test(a.navigator.userAgent)};b.prototype.isSamsungGalaxyS5=function(a){void 0===a&&(a=window);return/Android.*SM-G900[H,F]/i.test(a.navigator.userAgent)};b.prototype.isSamsungDevice=function(a){void 0===a&&(a=window);return this.isSamsungTablet(a)||this.isSamsungPhone(a)};b.prototype.isNexus7=function(a){void 0===a&&(a=window);return/ nexus 7 /.test(a.navigator.userAgent.toLowerCase())};b.prototype.isChrome=
function(a){void 0===a&&(a=window);return 0<a.navigator.userAgent.toLowerCase().indexOf("chrome")||this.isChromeIOS(a)};b.prototype.isChromeDesktop=function(a){void 0===a&&(a=window);var c=a.navigator.userAgent.toLowerCase();return this.isChrome(a)&&(0<c.indexOf("mac os x")||0<c.indexOf("windows nt"))&&!this.isChromeIOS(a)};b.prototype.isAndroidInternetBrowser=function(a){void 0===a&&(a=window);var c=a.navigator.userAgent;a=0<=c.indexOf("Android");c=(c=/WebKit\/([0-9]+)/.exec(c))&&0<c.length?parseInt(c[1],
10)||0:0;return a&&534>=c};b.prototype.ieVersion=function(a){void 0===a&&(a=window);var c=a.navigator.userAgent;if(this.isFireFox(a))return NaN;a=parseFloat((c.toLowerCase().match(/.*(?:rv|ie)[\/: ](.+?)([ \);]|$)/)||[])[1]);isNaN(a)&&-1!=c.indexOf("rv:11.0")&&(a=11);return a};b.prototype.isEdge=function(a){void 0===a&&(a=window);return-1<a.navigator.userAgent.indexOf("Edge")?!0:!1};b.prototype.isFlashAvailable=function(a){void 0===a&&(a=navigator.mimeTypes);var c=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&
(c=!0)}catch(b){a&&void 0!=a["application/x-shockwave-flash"]&&a["application/x-shockwave-flash"].enabledPlugin&&(c=!0)}return c};b.prototype.isAndroidWebView=function(a){void 0===a&&(a=window);return this.isAndroid(a)&&/version/.test(a.navigator.userAgent.toLowerCase())&&this.isChrome(a)};b.prototype.getAndroidVersion=function(a){void 0===a&&(a=window);a=a.navigator.userAgent.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);var c,b;if(!a)return NaN;c=a[1]&&parseFloat(a[1]);b=a[2]&&parseFloat(a[2]);
return c&&b?parseFloat(a[1]+"."+a[2]):c?c:NaN};b.prototype.isUIWebView=function(a){void 0===a&&(a=window);return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(a.navigator.userAgent)};b.prototype.isWebView=function(a){void 0===a&&(a=window);return this.isUIWebView(a)||this.isAndroidWebView(a)};b.prototype.noFullscreenButton=function(a){void 0===a&&(a=window);return this.isIOSDevice(a)&&this.isIPod(a)||this.isIE(a)&&11>this.ieVersion(a)};b.prototype.useMobileTheme=function(a){void 0===a&&(a=window);
return this.isMobileDevice(a)||this.isNexus7(a)||this.isSamsungDevice(a)};b.prototype.getOSXVersion=function(a){void 0===a&&(a=window);var c=NaN;a=a.navigator.userAgent.split("Mac OS X 10_");1<a.length&&(a=a[1].split("_"),1==a.length&&(a=a[0].split(")")),c=parseFloat(a[0]));return c};b.prototype.getIOSVersion=function(a){void 0===a&&(a=window);var c=NaN;if(a=a.navigator.userAgent.match(/OS (\d+)(?:_(\d+))?(?:_(\d+))*/i)){var b=a[1]&&parseFloat(a[1]),g=a[2]&&parseFloat(a[2]);b&&g?c=parseFloat(a[1]+
"."+a[2]):b&&(c=b)}return c};b._LOGTAG="DOMUtil";return b}();e.DOMUtilStatic=f})(com$adobe$ccv$util||(com$adobe$ccv$util={}));var DOMUtil=new com$adobe$ccv$util.DOMUtilStatic,DOMUtil=DOMUtil||null;
(function(e){var f=function(){function a(){}a.prototype.count=function(a){};a.prototype.groupEnd=function(){};a.prototype.time=function(a){};a.prototype.timeEnd=function(a){};a.prototype.trace=function(){};a.prototype.group=function(a){};a.prototype.dirxml=function(a){};a.prototype.debug=function(a){for(var b=1;b<arguments.length;b++);};a.prototype.groupCollapsed=function(a){};a.prototype.select=function(a){};a.prototype.info=function(a){for(var b=1;b<arguments.length;b++);};a.prototype.profile=function(a){};
a.prototype.assert=function(a,b){for(var g=2;g<arguments.length;g++);};a.prototype.msIsIndependentlyComposed=function(a){return!1};a.prototype.clear=function(){};a.prototype.dir=function(a){for(var b=1;b<arguments.length;b++);};a.prototype.warn=function(a){for(var b=1;b<arguments.length;b++);};a.prototype.error=function(a){for(var b=1;b<arguments.length;b++);};a.prototype.log=function(a){for(var b=1;b<arguments.length;b++);};a.prototype.profileEnd=function(){};return a}();e.DummyConsole=f;var b=function(){function a(a,
b){void 0===b&&(b=console);this.sendMessageTag=a;this._console=b}a.prototype.setCapacity=function(a){};a.prototype.clear=function(){};a.prototype.sendMessage=function(a,b,g){return"["+a+"] "+b+": "+g};a.prototype.info=function(a,b){this._console.log(this.sendMessage("INFO",a,b))};a.prototype.debug=function(a,b){this._console.log(this.sendMessage("DEBUG",a,b))};a.prototype.warn=function(a,b){this._console.warn(this.sendMessage("WARN",a,b))};a.prototype.error=function(a,b){this._console.error(this.sendMessage("ERROR",
a,b))};a.isAvailable=function(){return!!window.console};a.installDummyConsole=function(){window.console=new f};return a}();e.ConsoleLogger=b;b=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.getMessageWithTimestamp=function(a,c,b){return(new Date).toString()+a+" "+c+" "+b};c.prototype.sendMessage=function(a,c,b){return this.getMessageWithTimestamp(" ["+a+"] :",c,b)};c.prototype.addLogger=function(a){};return c}(b);e.ServerLogger=b})(com$adobe$ccv$logging||(com$adobe$ccv$logging=
{}));var ConsoleLogger=function(e){function f(){e.apply(this,arguments)}__extends(f,e);return f}(com$adobe$ccv$logging.ConsoleLogger),ServerLogger=function(e){function f(){e.apply(this,arguments)}__extends(f,e);return f}(com$adobe$ccv$logging.ServerLogger),com$adobe$ccv$plugins;
(function(e){var f=function(){function b(){this._plugins=[]}b.prototype.registerPlugin=function(a){this._plugins.push(a)};b.prototype.unregisterPlugin=function(a){for(var c,b=this._plugins.length,g=0;g<b;++g)if(c=this._plugins[g],c===a)return this._plugins.splice(g,1),c.shutdown(),!0;return!1};b.prototype.attachTo=function(a,c){var d=$.Deferred(),g=this;if(0<c.getConfigValue("plugins").length){var h=c.getConfigValue("rootdir");$.getScript(h+"/js/ccv-plugins.min.js",function(h,m,t){if(200==t.status){LOGGING&&
Log.info(b._LOGTAG,"plugins loaded from ccv-plugins.min.js");var e=0;h=g._plugins.slice(0);var f=h.length;if(0==f)d.resolve(g);else for(m=0;m<f;++m)h[m].attachTo(a,c).done(function(a){++e==f&&d.resolve(g)})}else LOGGING&&Log.error(b._LOGTAG,"failed to loaded ccv-plugins.min.js"),d.reject(g)})}else d.resolve(g);return d.promise()};b.prototype.shutdown=function(){for(var a=this._plugins.length,c=0;c<a;++c)this._plugins[c].shutdown();this._plugins.splice(0);this._plugins=null};b._LOGTAG=LOGGING?"PluginManager":
"";return b}();e.PluginManagerStatic=f})(com$adobe$ccv$plugins||(com$adobe$ccv$plugins={}));var PluginManager=new com$adobe$ccv$plugins.PluginManagerStatic;
(function(e){var f=function(b){function a(c){b.call(this,c);this.state="INIT";a.instance&&a.instance.shutdown();a.instance=this}__extends(a,b);a.prototype.updateHtml=function(a,b,g){};a.prototype.embedPlayer=function(a,b,g){};a.prototype.shutdown=function(){};a.prototype.setPoster=function(a){};a.prototype.onSuccess=function(){if("SUCCESS"==this.state)LOGGING&&Log.info(a._LOGTAG,"_onSuccess: ignoring "+this.state);else if(LOGGING&&"INIT"!=this.state&&Log.info(a._LOGTAG,"_onSuccess: overruling "+this.state),
this.state="SUCCESS",LOGGING&&Log.info(a._LOGTAG,"_onSuccess: setting "+this.state),"skin"!=this.configuration.getConfigValue("test")){var c=this.element;c.find("#"+this.videoPosterID).removeClass("show").addClass("hide");c.find("#"+this.videoHolderID).removeClass("hide").addClass("show");this.embedPlayer(c,this.url,this.poster)}};a.prototype.onError=function(){"INIT"==this.state?(this.state="ERROR",this.deferred.reject(this.url),LOGGING&&Log.info(a._LOGTAG,"_onError: setting "+this.state)):LOGGING&&
Log.info(a._LOGTAG,"_onError: overruled by "+this.state)};a.prototype.validate=function(){for(var c=this.element,b=this.element.width(),g=this.element.height();0<c.length;){if(c.height()<g)return LOGGING&&Log.error(a._LOGTAG,"Invalid container height: id='"+c.attr("id")+"', class='"+c.attr("class")+"'. Need "+g+"px, have "+c.height()+"px."),!1;if(c.width()<b)return LOGGING&&Log.error(a._LOGTAG,"Invalid container width: id='"+c.attr("id")+"', class='"+c.attr("class")+"'. Need "+b+"px, have "+c.width()+
"px."),!1;c=c.parent()}return!0};a.prototype.isTouchDevice=function(){return"ontouchstart"in window||"onmsgesturechange"in window};a.prototype.isDesktopScreen=function(){var a=window.devicePixelRatio?window.devicePixelRatio:1,b=window.screen.width/a,a=window.screen.width/a;return(b<a?b:a)>=DOMUtil.DESKTOP_MIN_SIZE};a.prototype.applyTheme=function(a){"mobile"==this.configuration.getConfigValue("theme")&&a.find("#controlbar-holder").addClass("theme-mobile")};a.prototype.initTask=function(){this.applyTheme(this.element);
return b.prototype.initTask.call(this)};a.prototype.isAttachedTo=function(a,b,g,h,k,m){return this.element&&this.element.css("id")==a.css("id")&&this.url==b&&this.poster==g&&this.videoWidth==h&&this.videoHeight==k&&this.rootFolder==m};a.prototype.attachTo=function(c,d,g,h,k,m,t){var f=$.Deferred(),u=this;com$adobe$ccv$logging.ConsoleLogger.isAvailable()&&console.info(a._LOGTAG,"[ccv] Creative Cloud Player "+e.Version.getVersion());u.configuration=d;this.state="INIT";"skin"==d.getConfigValue("test")&&
(g&&0!=g.length||(g=window.location.href,0==d.getConfigValue("bcid").length&&(g=d.getConfigValue("bcid"),g=e.Constants.DEFAULT_HOST+e.Constants.API_ROOT+g+"/info")),h&&0!=h.length||(h=d.getConfigValue("test_poster")));"default"==d.getConfigValue("theme")&&(DOMUtil.useMobileTheme()?(LOGGING&&Log.info(a._LOGTAG,"Using theme=mobile"),d.setConfigValue("theme","mobile")):d.setConfigValue("theme","desktop"));b.prototype.attachTo.call(this,c,d,g,h,k,m,t).done(function(){LOGGING&&Log.info(a._LOGTAG,"attachTo: successfully attached");
u.updateHtml(c,this.videoHolderID,h);c.attr("data-timestamp",DOMUtil.now().toString());d.getConfigValue("plugins").length&&PluginManager.attachTo(c,d);u.onSuccess();f.resolve(this)}).fail(function(){LOGGING&&Log.error(a._LOGTAG,"attachTo: failed to attach");f.reject(this)});return f.promise()};a.prototype.getPromise=function(){return this.deferred.promise()};a.prototype.changeSize=function(a,b){};a._LOGTAG="CloudPlayer";a.instance=null;return a}(e.CoreCloudPlayer);e.CloudPlayer=f})(com$adobe$ccv$app||
(com$adobe$ccv$app={}));var com$adobe$ccv$view;(function(e){var f=function(){function b(a){this.$el=a.el;this.initialize(a)}b.prototype.initialize=function(a){this.setupSelectors();this.setupDefaults();this.addSubscribers();return this};b.prototype.setupSelectors=function(){};b.prototype.setupDefaults=function(){};b.prototype.addSubscribers=function(){};b.prototype.destroy=function(){};b.prototype.render=function(){return this};return b}();e.BaseView=f})(com$adobe$ccv$view||(com$adobe$ccv$view={}));
var com$adobe$ccv$controls;
(function(e){var f=function(b){function a(a){b.call(this,a);this._LOGTAG="PlayPauseControl";this._$play.on("click",jQuery.proxy(this._onClick,this))}__extends(a,b);a.prototype.setupSelectors=function(){this._$play=this.$el.find(".playpause")};a.prototype._onClick=function(a){LOGGING&&Log.info(this._LOGTAG,"_onClick");a.stopImmediatePropagation();a.preventDefault();this.acceptsReplay()?this._onVideoReplay(a):this.isPlaying()?this._onVideoPause(a):this._onVideoPlay(a)};a.prototype._onVideoPlay=function(a){LOGGING&&
Log.info(this._LOGTAG,"_onVideoPlay: trigger play");this.showPlayState();this.$el.trigger("play")};a.prototype._onVideoPause=function(a){LOGGING&&Log.info(this._LOGTAG,"_onVideoPause: trigger pause");this.showPauseState();this.$el.trigger("pause")};a.prototype._onVideoReplay=function(a){LOGGING&&Log.info(this._LOGTAG,"_onVideoReplay: trigger rewind");this.$el.trigger("rewind");this._onVideoPlay(a)};a.prototype.showPlayState=function(){this.$el.removeClass("ended");this._$play.addClass("pauseicon").removeClass("playicon");
this._$play.text("pause");return this};a.prototype.showPauseState=function(){this.$el.removeClass("ended");this._$play.addClass("playicon").removeClass("pauseicon");this._$play.text("play");return this};a.prototype.showReplayState=function(){this._$play.addClass("playicon").removeClass("pauseicon");this._$play.text("replay");this.$el.addClass("ended");return this};a.prototype.isPlaying=function(){return this.$el.hasClass("ended")?!1:this._$play.hasClass("pauseicon")};a.prototype.acceptsReplay=function(){return this.$el.hasClass("ended")};
return a}(com$adobe$ccv$view.BaseView);e.PlayPauseControl=f})(com$adobe$ccv$controls||(com$adobe$ccv$controls={}));
(function(e){var f=function(b){function a(a){this._options=a;b.call(this,a);this._$volButton.on("click",jQuery.proxy(this._onVolumeClick,this));this.setVolume(a.volume);if(this.isSlideEnabled=!DOMUtil.isMobileDevice())this._$volSlider.on("input",jQuery.proxy(this._onVolumeUpdate,this)).on("change",jQuery.proxy(this._onVolumeUpdate,this)).on("touchstart",jQuery.proxy(this._onVolumeBarTouch,this));else this._$range.addClass("hide")}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,
a);return this.render()};a.prototype.setupSelectors=function(){var a=this.$el;this._LOGTAG="VolumeControl";this._$volumeHolder=a;this._$volSlider=a.find(".volume");this._$volLevelIndicator=a.find(".volumelevel");this._$volSliderKnob=a.find(".volumeknob");this._$volfill=a.find(".volumefill");this._$volButton=a.find(".mute");this._$range=a.find(".volumeslide")};a.prototype.setupDefaults=function(){this._lastVolume=this.isSlideEnabled?1:0.5};a.prototype.render=function(){return this};a.prototype._onVolumeUpdate=
function(){var a=this._$volSlider.val();a!=this.getVolume()&&(a/=100,this.$el.trigger($.Event("volumeUpdate",{percent:a})),this.setVolume(a))};a.prototype._onVolumeBarTouch=function(a){a.stopImmediatePropagation();var b=this._$volSlider.parent().offset();a=a.originalEvent.pageX-b.left;b=this._$volSlider.width();0<a&&a<b&&(this._$volSlider.val(a/b*100),this._$volSlider.trigger("change"))};a.prototype._updateVolumeIndicator=function(a){LOGGING&&Log.info(this._LOGTAG,"_updateVolumeIndicator: "+a);this._$volfill.css("width",
100*a+"%");var b=this._$range.width();this._$volSliderKnob.css("transform","translateX("+(b*a-b)+"px)");this._$volButton.removeClass("level2").removeClass("level1");0.33>=a?this._$volButton.addClass("level1"):0.66>=a&&this._$volButton.addClass("level2")};a.prototype._onVolumeClick=function(a){a.stopImmediatePropagation();a.preventDefault();0!=this.getVolume()?(this.$el.trigger($.Event("volumeUpdate",{percent:0})),this.setVolume(0)):(this.isSlideEnabled||(this._lastVolume=1),this.$el.trigger($.Event("volumeUpdate",
{percent:this._lastVolume})),this.setVolume(this._lastVolume))};a.prototype.getVolume=function(){return Number(this._$volLevelIndicator.val())};a.prototype.setVolume=function(a){if(!(0>a)){var b=Math.floor(100*a);0==b?(this._lastVolume=0<this.getVolume()/100?this.getVolume()/100:0.5,this._$volButton.addClass("muteicon")):this._$volButton.removeClass("muteicon");this._$volLevelIndicator.val(b+"");this._$volLevelIndicator.text(b+"");this.isSlideEnabled&&this._updateVolumeIndicator(a)}};return a}(com$adobe$ccv$view.BaseView);
e.VolumeControl=f})(com$adobe$ccv$controls||(com$adobe$ccv$controls={}));
(function(e){var f=function(b){function a(a){this._options=a;b.call(this,a)}__extends(a,b);a.prototype.setupSelectors=function(){var a=this.$el;this._$duration=a.find(".vduration");this._$time=a.find(".timelabel")};a.prototype.setupDefaults=function(){this._duration=0};a.prototype.setDuration=function(a){this._duration=a;this._$duration.html(StringUtil.formatTime(a));return this};a.prototype.getDuration=function(){return this._duration};a.prototype.updateCurrentTime=function(a){this._$time.html(StringUtil.formatTime(a));
return this};return a}(com$adobe$ccv$view.BaseView);e.DurationControl=f})(com$adobe$ccv$controls||(com$adobe$ccv$controls={}));var com$adobe$ccv$components;
(function(e){var f=function(){function b(a,b){this._LOGTAG="Thumbnail";this.$el=a;this.settings=b;this._setupDefaults()}b.prototype.hideThumbnail=function(){$(this._div).hide()};b.prototype.showThumbnail=function(a,b,d,g){var h;$(this._div).show();h=this._div.style.backgroundImage;var k=Math.floor(a/(this._interval*this._thumbnailInSprite));(h=h.replace(/sprite_[0-9]+/g,"sprite_"+k))&&this._div.style.backgroundImage!=h&&(this._div.style.backgroundImage=h);this._div.style.backgroundPositionX=-Math.floor((a-
k*this._interval*this._thumbnailInSprite)/this._interval)*this._thumbnailWidth+"px";h=this._thumbnailWidth/2;a=0>b-h?0:b-h;b+h>g&&(a=g-this._thumbnailWidth);this._div.style.left=a+d+"px"};b.prototype.isThumbnailHidden=function(){return"none"===window.getComputedStyle(this._div).display};b.prototype._setupDefaults=function(){var a;a=this.settings.spriteURL;if(null!=a){this._interval=this.settings.interval;this._thumbnailInSprite=this.settings.thumbnailInSprite;this._thumbnailWidth=this.settings.thumbnailWidth;
this._thumbnailHeight=this.settings.thumbnailHeight;this._spriteCount=this.settings.spriteCount;var b=document.createElement("div");b.className="ccv-thumbnail-holder";b.style.backgroundImage="url("+a+")";b.style.backgroundPositionX="0px";b.style.backgroundPositionY="0px";b.style.backgroundRepeat="no-repeat";b.style.height=this._thumbnailHeight+"px";b.style.width=this._thumbnailWidth+"px";this.$el.append(b);$(b).hide();this._div=b}else LOGGING&&Log.warn(this._LOGTAG,"Sprite URL could not be extracted")};
return b}();e.Thumbnail=f})(com$adobe$ccv$components||(com$adobe$ccv$components={}));$.fn.thumbnail=function(e){if(e.displayThumbnails)return new com$adobe$ccv$components.Thumbnail($(this),e);LOGGING&&Log.info(this._LOGTAG,"Thumbnails for videos not enabled");return null};
(function(e){var f=function(b){function a(a){b.call(this,a);this._LOGTAG="ProgressControl";this.$el.on("mouseenter",jQuery.proxy(this._onProgressOver,this)).on("mouseleave",jQuery.proxy(this._onProgressOut,this)).on("mousedown touchstart",jQuery.proxy(this._onTimelineClick,this)).on("inputVal",jQuery.proxy(this._onTimeLineSlide,this)).on("changeVal",jQuery.proxy(this._onTimeUpdate,this))}__extends(a,b);a.prototype.initialize=function(a){this._$videoInfoDiv=$(a.videoInfo);b.prototype.initialize.call(this,
a);return this.render()};a.prototype.setupSelectors=function(){var a=this.$el;this._$timeLineKnob=a.find(".timelineknob");this._$videoTimeLine=a.find(".timeline");this._$hoverLine=a.find(".hoverline");this._$vidoeTimeLineWrapper=a.find(".videotimewrap");this._$slider=a.find(".timelineslide");this._$duration=a.find(".duration");this._$document=$(document)};a.prototype.setupDefaults=function(){this._percent=this._duration=0;this._dragging=this._hovering=this._sliding=!1};a.prototype.render=function(){this.$el.removeClass("hide").addClass("show");
this._thumbnail=this.$el.thumbnail({spriteURL:this._$videoInfoDiv.data("seriesthumbnail_sprite_url"),interval:parseFloat(this._$videoInfoDiv.data("series_thumbnail_frequency")),thumbnailInSprite:parseInt(this._$videoInfoDiv.data("thumbnail_per_sprite"),10),thumbnailWidth:parseInt(this._$videoInfoDiv.data("series_thumbnail_width"),10),thumbnailHeight:parseInt(this._$videoInfoDiv.data("series_thumbnail_height"),10),displayThumbnails:Boolean(this._$videoInfoDiv.data("displaythumbnails")),spriteCount:parseInt(this._$videoInfoDiv.data("total_number_of_sprites"),
10)});return this};a.prototype.showProgressBar=function(){this.enable();this.$el.removeClass("hide").addClass("show")};a.prototype.hideProgressBar=function(){this.disable();this.$el.addClass("hide").removeClass("show")};a.prototype._updateProgressBar=function(a){1<a&&(LOGGING&&Log.info(this._LOGTAG,"Progress: trimming percentage, "+100*a+"% => 100%"),a=1);this._percent=a;this._$videoTimeLine.width(100*a+"%");this._$hoverLine.css("left",100*a+"%");var b=this._$vidoeTimeLineWrapper.outerWidth(),b=a*
b;this._$timeLineKnob.css("transform","translateX("+b+"px)");this._$hoverLine.data("x",b);this._$hoverLine.data("perc",100*a);if(a=this._$hoverLine.data("nw"))a=Number(a),a-=b,0>a?this._$hoverLine.addClass("dark"):this._$hoverLine.removeClass("dark"),this._$hoverLine.css("transform","scaleX("+a+")")};a.prototype._onTimeUpdate=function(){var a=this._$slider.val(),b=this;b._sliding=!0;this.$el.trigger("progressDown");this._updateProgressBar(a);this.$el.trigger("progressUp",{percent:this._percent});
setTimeout(function(){b.$el.on("mouseenter",jQuery.proxy(b._onProgressOver,b));b._sliding=!1},500)};a.prototype._onTimeLineSlide=function(){var a=this._$slider.val();this._sliding=!0;this._updateProgressBar(a)};a.prototype._onElementMouseUP=function(a){this._onMouseUP(a);this._$document.on("mousemove",$.proxy(this._onCursorMove,this));a.stopImmediatePropagation()};a.prototype._onMouseUP=function(a){this._dragging=!1;this._$duration.addClass("hide").removeClass("show");this._$hoverLine.css("display",
"none");this._$document.off("mousemove mouseup mouseleave touchmove touchend touchcancel");this.$el.off("mouseenter");this._thumbnail&&this._thumbnail.hideThumbnail();this._$timeLineKnob.removeClass("sticky");a.stopImmediatePropagation();a=this.getClickPercentageOnTimeline(a);0<=a&&this._$slider.val(a+"");this.$el.trigger("inputVal");this.$el.trigger("changeVal")};a.prototype.getClickXPosOnScreen=function(a){var b=0;if("touchstart"==a.type||"touchmove"==a.type||"touchend"==a.type||"touchcancel"==
a.type)b=(a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]).pageX;else if("mousedown"==a.type||"mouseup"==a.type||"mousemove"==a.type||"mouseover"==a.type||"mouseout"==a.type||"mouseenter"==a.type||"mouseleave"==a.type)b=a.pageX;return b};a.prototype.getClickPercentageOnTimeline=function(a){var b=this._$vidoeTimeLineWrapper.offset().left,g=this._$vidoeTimeLineWrapper.outerWidth();a=this.getClickXPosOnScreen(a)-b;b=-1;0<=a&&a<=g&&(b=a/g);return b};a.prototype._onMouseMove=function(a){a.stopPropagation();
var b=this.getClickPercentageOnTimeline(a);0<=b&&(this._$slider.val(b+""),this.$el.trigger("inputVal"));this._onProgressMouseMove(a)};a.prototype._onTimelineClick=function(a){this._$duration.addClass("show").removeClass("hide");this._$hoverLine.css("display","block");this._onProgressMouseMove(a);this._dragging=!0;this._$document.on("mousemove touchmove",jQuery.proxy(this._onMouseMove,this));this._$document.on("mouseup mouseleave touchend touchcancel",$.proxy(this._onMouseUP,this));this.$el.on("mouseup",
$.proxy(this._onElementMouseUP,this));this._$timeLineKnob.addClass("sticky");a.stopPropagation();a=this.getClickPercentageOnTimeline(a);0<=a&&(this._$slider.val(a+""),this.$el.trigger("inputVal"))};a.prototype._onProgressOver=function(){this._hovering=!0;this._$hoverLine.css("display","block");this._$duration.addClass("show").removeClass("hide");this._$document.on("mousemove",$.proxy(this._onCursorMove,this))};a.prototype._onProgressOut=function(a){this._dragging?this._hovering=!1:(this._hovering=
!1,this._$duration.addClass("hide").removeClass("show"),this._$hoverLine.css("display","none"),this._thumbnail&&this._thumbnail.hideThumbnail(),this._$document.off("mousemove"))};a.prototype._onCursorMove=function(a){this._dragging||this._onProgressMouseMove(a)};a.prototype._onProgressMouseMove=function(a){var b,g;b=this._$vidoeTimeLineWrapper.offset().left;g=this.$el.offset().left;a=this.getClickXPosOnScreen(a)-b;b-=g;g=this._$vidoeTimeLineWrapper.outerWidth();if(0<=a&&a<=g){var h=a/g*this._duration;
this._thumbnail&&this._thumbnail.showThumbnail(h,a,b,g);this.updateProgressTooltip(h);var h=this._$duration.outerWidth(!0)/2,k=0,k=0>a-h?0:a-h;a>=g-h&&(k=g-this._$duration.outerWidth(!0));if(this._thumbnail){var m=this._thumbnail.settings.thumbnailWidth/2,k=0>k-(m-h)?m-h:k;k+h+m>g&&(k=g-(m+h))}this._$duration.css("left",k+b);this._$duration.addClass("show").removeClass("hide");b=a-Number(this._$hoverLine.data("x"));0>b?this._$hoverLine.addClass("dark"):this._$hoverLine.removeClass("dark");this._$hoverLine.data("nw",
a);this._$hoverLine.css("transform","scaleX("+b+")")}else this._$duration.addClass("hide").removeClass("show")};a.prototype.updateProgressBar=function(a){this._sliding||this._percent==a||this._updateProgressBar(a)};a.prototype.updateProgressTooltip=function(a){this._$duration.html(StringUtil.formatTime(a))};a.prototype.setDuration=function(a){this._duration=a;return this};a.prototype.getDuration=function(){return this._duration};a.prototype.getPercent=function(){return this._percent};a.prototype.isSliding=
function(){return this._sliding||this._hovering};a.prototype.changeSize=function(a,b){};a.prototype.isThumbnailHidden=function(){return this._thumbnail?this._thumbnail.isThumbnailHidden():!0};a.prototype.enable=function(){this.$el.css("pointer-events","auto")};a.prototype.disable=function(){this.$el.css("pointer-events","none")};return a}(com$adobe$ccv$view.BaseView);e.ProgressControl=f})(com$adobe$ccv$controls||(com$adobe$ccv$controls={}));
(function(e){var f=function(b){function a(a){b.call(this,a)}__extends(a,b);a.prototype.setupSelectors=function(){this._btn=this.$el.find(".control-brand");this._btn.on("click",jQuery.proxy(this._onClick,this));this._url="http://www.adobe.com"};a.prototype._onClick=function(a){a.stopImmediatePropagation();window.open(this._url,"_blank").focus()};return a}(com$adobe$ccv$view.BaseView);e.BrandControl=f})(com$adobe$ccv$controls||(com$adobe$ccv$controls={}));
(function(e){var f=function(){function b(){this.isFullScreen=function(){return!document.fullscreen||document.fullscreen||void 0!==document.webkitIsFullScreen&&!document.webkitIsFullScreen||void 0!==document.mozFullScreen&&!document.mozFullScreen?!0:!1}}b.prototype._isSafari=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("safari")&&-1==a.indexOf("chrome")?!0:!1};b.prototype.goFullscreen=function(a){a.mozRequestFullScreenWithKeys?a.mozRequestFullScreenWithKeys():a.mozRequestFullScreen?
a.mozRequestFullScreen():a.webkitEnterFullscreen?a.webkitEnterFullscreen():a.webkitRequestFullScreen?a.ALLOW_KEYBOARD_INPUT&&!this._isSafari()?a.webkitRequestFullScreen(a.ALLOW_KEYBOARD_INPUT):a.webkitRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.requestFullScreen&&a.requestFullScreen()};b.prototype.exitFullscreen=function(){document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?
document.msExitFullscreen():document.exitFullscreen&&document.exitFullscreen()};b.prototype.requestPrefix=function(a){return a.fullscreenchange?"fullscreenchange":a.webkitRequestFullScreen?"webkitfullscreenchange":a.webkitendfullscreen?"webkitendfullscreen":a.mozRequestFullScreen?"mozfullscreenchange":a.msRequestFullscreen?"MSFullscreenChange":""};return b}();e.FullscreenUtil=f})(com$adobe$ccv$util||(com$adobe$ccv$util={}));
var FullscreenUtil=new com$adobe$ccv$util.FullscreenUtil,FullscreenUtil=FullscreenUtil||null;
(function(e){var f=function(b){function a(a){b.call(this,a);this._LOGTAG="ScreenControl"}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,a);this._isFullscreen=!1;return this.render()};a.prototype.setupSelectors=function(){var a=this.$el;this._$videoContainer=a.parents("#html5-video-holder");this._$controlScreen=a.find(".fullscreen");if(0<this._$controlScreen.length){this._$controlScreen.on("click",jQuery.proxy(this._onScreenClick,this));a=$("video");1==a.length&&
(LOGGING&&Log.info(this._LOGTAG,"setupSelector: registering webkitendfullscreen handler"),a.on("webkitendfullscreen",jQuery.proxy(this._onScreenClick,this)));var a=FullscreenUtil.requestPrefix(this._$controlScreen.get(0)),b=this;$(document).on(a,function(a){b._isFullscreen&&(LOGGING&&Log.info(b._LOGTAG,"setupSelectors: showNormalState"),b.showNormalState());b._isFullscreen=!b._isFullscreen})}};a.prototype.render=function(){return this};a.prototype._onScreenClick=function(a){LOGGING&&Log.info(this._LOGTAG,
"_onScreenClick");this._$controlScreen.hasClass("show-normal-screen")||"webkitendfullscreen"==a.type?this.showNormalState():this.showFullscreenState();return!1};a.prototype.setFullScreenHandler=function(a){this._handler=a};a.prototype.showNormalState=function(a){void 0===a&&(a=!0);LOGGING&&Log.info(this._LOGTAG,"showNormalState");this._$controlScreen.hasClass("show-normal-screen")&&(this._$controlScreen.removeClass("show-normal-screen"),this.$el.removeClass("full-screen-mode"),a&&this._handler&&this._handler.exitFullscreen())};
a.prototype.showPressEscMessage=function(){LOGGING&&Log.info(this._LOGTAG,"showPressEscMessage");this._pressEscMsg||(this._pressEscMsg=new com$adobe$ccv$app.Message("press-esc-message","","",com$adobe$ccv$localization.StringSet.getString("%press_esc"),""));var a=this;setTimeout(function(){var b=a._pressEscMsg.getMsgDiv(),g=DOMUtil.windowInnerHeight()/3-b.height()/2;b.css("margin-top",g.toString()+"px");a._pressEscMsg.showMsg(a._$videoContainer);b.fadeIn(4E3,function(){b.fadeOut(3E3,function(){a._pressEscMsg.hideMsg()})})},
1E3)};a.prototype.showFullscreenState=function(){LOGGING&&Log.info(this._LOGTAG,"showFullscreenState");this._$controlScreen.hasClass("show-normal-screen")||(this._$controlScreen.addClass("show-normal-screen"),this.$el.addClass("full-screen-mode"),this._handler&&this._handler.goFullscreen(),DOMUtil.isSafari()&&!DOMUtil.isIOSDevice()&&this.showPressEscMessage())};return a}(com$adobe$ccv$view.BaseView);e.ScreenControl=f})(com$adobe$ccv$controls||(com$adobe$ccv$controls={}));
(function(e){var f=function(){function b(){this._LOGTAG="CookiesUtil"}b.prototype.createCookie=function(a,b,d){void 0===d&&(d=-1);var g="";0<=d&&(g=new Date,g.setTime(g.getTime()+864E5*d),g="; expires="+g.toUTCString());document.cookie=a+"="+b+g+"; path=/";LOGGING&&this.readCookie(a)!=b&&Log.warn(this._LOGTAG,"ccv: Can't save cookie "+a+"="+b)};b.prototype.readCookie=function(a){a+="=";for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var g=b[d];" "==g.charAt(0);)g=g.substring(1,g.length);
if(0==g.indexOf(a))return g.substring(a.length,g.length)}return null};b.prototype.eraseCookie=function(a){document.cookie=a+"==; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"};return b}();e.CookiesUtilStatic=f})(com$adobe$ccv$util||(com$adobe$ccv$util={}));var CookiesUtil=new com$adobe$ccv$util.CookiesUtilStatic,CookiesUtil=CookiesUtil||null;
(function(e){var f=function(){function b(){}b.prototype._createMouseEvent=function(a,b){var d=document.createEvent("MouseEvent");d.initMouseEvent(a,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);return d};b.prototype._touchHandler=function(a){var b=a.changedTouches[0],d="";switch(a.type){case "touchstart":d="mousedown";break;case "touchmove":d="mousemove";break;case "touchend":d="mouseup";break;case "touchenter":d="mouseenter";break;case "touchleave":d="mouseleave";break;
case "touchcancel":d="mouseout";break;default:return}var g=this._createMouseEvent(d,b);b.target.dispatchEvent(g);"mouseup"==d&&(g=this._createMouseEvent("click",b),b.target.dispatchEvent(g));a.preventDefault()};b.prototype.register=function(){LOGGING&&Log.info(b._LOGTAG,"registering touch event handler");document.addEventListener("touchstart",jQuery.proxy(this._touchHandler,this),!0);document.addEventListener("touchmove",jQuery.proxy(this._touchHandler,this),!0);document.addEventListener("touchend",
jQuery.proxy(this._touchHandler,this),!0);document.addEventListener("touchenter",jQuery.proxy(this._touchHandler,this),!0);document.addEventListener("touchleave",jQuery.proxy(this._touchHandler,this),!0);document.addEventListener("touchcancel",jQuery.proxy(this._touchHandler,this),!0)};b.prototype.unregister=function(){LOGGING&&Log.info(b._LOGTAG,"unregistering touch event handler");document.removeEventListener("touchstart",jQuery.proxy(this._touchHandler,this),!0);document.removeEventListener("touchmove",
jQuery.proxy(this._touchHandler,this),!0);document.removeEventListener("touchend",jQuery.proxy(this._touchHandler,this),!0);document.removeEventListener("touchenter",jQuery.proxy(this._touchHandler,this),!0);document.removeEventListener("touchleave",jQuery.proxy(this._touchHandler,this),!0);document.removeEventListener("touchcancel",jQuery.proxy(this._touchHandler,this),!0)};b._LOGTAG="TouchUtil";return b}();e.TouchUtilStatic=f})(com$adobe$ccv$util||(com$adobe$ccv$util={}));
var TouchUtil=new com$adobe$ccv$util.TouchUtilStatic,TouchUtil=TouchUtil||null,VISITOR_ORG_ID="44FD596D5707FFAC7F000101@AdobeOrg",com$adobe$ccv$dunamis;
(function(e){var f=function(){function b(){}b.getInstance=function(){null==b.instance&&(b.instance=new b,this.init());return b.instance};b.init=function(){b.visitor_id=b.setVisitorID()};b.setVisitorID=function(){try{return window.Visitor.getInstance(VISITOR_ORG_ID).getMarketingCloudVisitorID()}catch(a){return""}};b.prototype.getVisitorID=function(){return b.visitor_id};return b}();e.VisitorSession=f})(com$adobe$ccv$dunamis||(com$adobe$ccv$dunamis={}));
(function(e){var f=e.VisitorSession,b=function(){function a(){}a.prototype.setProperties=function(a,b){this.ccv_id=b.getConfigValue("ccvid");this.clientappname=b.getConfigValue("clientappname");this.duration=b.getConfigValue("duration");this.video_format=VideoJSTechDetector.getVideoFormat(a);this.video_mimetype=VideoJSTechDetector.getVideoMimeType(a);this.content_name=VideoJSTechDetector.getVideoMimeType(a);this.visitor_guid=f.getInstance().getVisitorID()};a.prototype.getCCVID=function(){return this.ccv_id};
a.prototype.getClientAppName=function(){return this.clientappname};a.prototype.getVideoDuration=function(){return this.duration};a.prototype.getVideoFormat=function(){return this.video_format};a.prototype.getVideoMimeType=function(){return this.video_mimetype};a.prototype.getVisitorGUID=function(){return this.visitor_guid};return a}();e.DunamisVideoProperties=b})(com$adobe$ccv$dunamis||(com$adobe$ccv$dunamis={}));var VideoProperties=new com$adobe$ccv$dunamis.DunamisVideoProperties;
(function(e){var f=function(){function b(a,b,d){void 0===d&&(d=null);this.env_com_name="CCV";this.env_com_version="1.0.0";this.event_context_guid=VideoProperties.getCCVID();this.event_dts_end=(new Date).toISOString();this.event_workflow="Player";this.event_category="Service";this.event_subcategory="Video";this.event_type=a;this.event_subtype=b;this.event_user_agent=navigator.userAgent;this.event_language=navigator.language;this.event_visitor_guid=VideoProperties.getVisitorGUID();this.event_url=location.href;
this.source_name=VideoProperties.getClientAppName();this.content_id=VideoProperties.getCCVID();this.content_extension=VideoProperties.getVideoFormat();this.content_size=VideoProperties.getVideoDuration();this.content_mimetype=VideoProperties.getVideoMimeType();this.trn_number=this.generateGUID();this.trn_product=VideoProperties.getCCVID();this.trn_quantity=d||1;this.trn_amount=0;this.event_count=d||1;this.event_value=1}b.prototype.toJSON=function(){return{"event.context_guid":this.event_context_guid,
"event.dts_end":this.event_dts_end,"event.workflow":this.event_workflow,"event.category":this.event_category,"event.subcategory":this.event_subcategory,"event.type":this.event_type,"event.subtype":this.event_subtype,"event.user_agent":this.event_user_agent,"event.language":this.event_language,"event.value":this.event_value,"event.count":this.event_count,"event.visitor_guid":this.event_visitor_guid,"event.url":this.event_url,"source.name":this.source_name,"content.id":this.content_id,"content.extension":this.content_extension,
"content.name":this.content_name,"content.size":this.content_size,"content.mimetype":this.content_mimetype,"env.com.name":this.env_com_name,"env.com.version":this.env_com_version,"trn.number":this.trn_number,"trn.product":this.trn_product,"trn.quantity":this.trn_quantity,"trn.amount":this.trn_amount}};b.prototype.generateGUID=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};return b}();e.DunamisEvent=
f})(com$adobe$ccv$dunamis||(com$adobe$ccv$dunamis={}));
(function(e){(function(e){e[e.RENDER="render"]="RENDER";e[e.START="start"]="START";e[e.PAUSE="pause"]="PAUSE";e[e.RESUME="resume"]="RESUME";e[e.COMPLETE="complete"]="COMPLETE";e[e.REPLAY="replay"]="REPLAY";e[e.ENGAGEMENT="engage"]="ENGAGEMENT"})(e.DunamisEventTypes||(e.DunamisEventTypes={}));(function(e){e[e.PLAYER="player"]="PLAYER";e[e.VIDEO="video"]="VIDEO";e[e.RENDITION="rendition"]="RENDITION"})(e.DunamisEventSubTypes||(e.DunamisEventSubTypes={}));(function(e){e[e.DEV="dev"]="DEV";e[e.STAGE=
"stage"]="STAGE";e[e.PROD="prod"]="PROD"})(e.DunamisEnvironments||(e.DunamisEnvironments={}))})(com$adobe$ccv$dunamis||(com$adobe$ccv$dunamis={}));(function(e){var f=e.DunamisEvent,b=function(){function a(){}a.prototype.getEvent=function(a,b){return new f(a,a==e.DunamisEventTypes.RENDER?e.DunamisEventSubTypes.PLAYER:e.DunamisEventSubTypes.VIDEO,b)};return a}();e.DunamisEventFactory=b})(com$adobe$ccv$dunamis||(com$adobe$ccv$dunamis={}));var DunamisEventFactory=new com$adobe$ccv$dunamis.DunamisEventFactory;
(function(e){var f=function(){function b(){}b.ALLOW_NO_TOKEN=!0;b.SERVICE_NAME="ccv-service";b.ANALYTICS_API_KEY=b.SERVICE_NAME;b.ANALYTICS_PROJECT=b.SERVICE_NAME;b.ANALYTICS_X_PRODUCT=b.SERVICE_NAME;b.ANALYTICS_MAX_QUEUED_EVENTS=50;b.ANALYTICS_DEBOUNCE=10;b.ANALYTICS_USER_REGION="UNKNOWN";b.ANALYTICS_INGEST_TYPE="dunamis";b.TIMESTAMP_PROPERTY_NAME="event.dts_end";return b}();e.DunamisConfig=f})(com$adobe$ccv$dunamis||(com$adobe$ccv$dunamis={}));
var DunamisEnvironments=com$adobe$ccv$dunamis.DunamisEnvironments,ccv_to_dunamis_config_map=new Map;ccv_to_dunamis_config_map.set("dev",DunamisEnvironments.STAGE);ccv_to_dunamis_config_map.set("stable",DunamisEnvironments.STAGE);ccv_to_dunamis_config_map.set("stage",DunamisEnvironments.STAGE);ccv_to_dunamis_config_map.set("prod",DunamisEnvironments.PROD);
(function(e){var f=e.DunamisConfig,b=function(){function a(){}a.getInstance=function(b){null==e.DunamisEventSender.instance&&(a.instance=new e.DunamisEventSender,a.init(b));return a.instance};a.init=function(b){b={ENVIRONMENT:ccv_to_dunamis_config_map.get(b.getConfigValue("env"))||e.DunamisEnvironments.STAGE,ALLOW_NO_TOKEN:f.ALLOW_NO_TOKEN,ANALYTICS_API_KEY:f.ANALYTICS_API_KEY,ANALYTICS_PROJECT:f.ANALYTICS_PROJECT,ANALYTICS_X_PRODUCT:f.ANALYTICS_X_PRODUCT,ANALYTICS_MAX_QUEUED_EVENTS:f.ANALYTICS_MAX_QUEUED_EVENTS,
ANALYTICS_DEBOUNCE:f.ANALYTICS_DEBOUNCE,ANALYTICS_USER_REGION:f.ANALYTICS_DEBOUNCE,ANALYTICS_INGEST_TYPE:f.ANALYTICS_INGEST_TYPE,TIMESTAMP_PROPERTY_NAME:f.TIMESTAMP_PROPERTY_NAME};a.analyticsLib=new Ingest({getAccessToken:function(a){a(null,"")}},b);a.analyticsLib.enable(!0)};a.prototype.sendEvent=function(b){b=b.toJSON();a.analyticsLib.postEvent(b,function(a,b){})};return a}();e.DunamisEventSender=b})(com$adobe$ccv$dunamis||(com$adobe$ccv$dunamis={}));
(function(e){var f=com$adobe$ccv$dunamis.DunamisEventSender,b=com$adobe$ccv$dunamis.DunamisEventTypes,a=function(a){function d(b){a.call(this,b);this._LOGTAG="CoreView";this._seekingTo=-1;this.isVideoCompletelyWatched=this._dataLoaded=this._rewind=this._playAfterExitFullscreen=!1;this.isPlayedAfterPause=!0}__extends(d,a);d.prototype.setFullScreenElement=function(a){this._$fullScreenElement=a};d.prototype.initialize=function(b){this._options=b;this.dunamisEventSender=f.getInstance();this._$videoPlayer=
this.videoPlayer=this._options.videoPlayer;this._autoHideControlsTimeoutMS=DOMUtil.isMobileDevice()?3E3:1500;if(this._options.muted||!this._options.playVideoOnInit&&this._options.autoPlay)this._options.volume=0;a.prototype.initialize.call(this,b);this.logging_interval=Math.max(Math.round(this._options.duration/100),10);this.percent_played=Math.round(this.logging_interval/this._options.duration*100);this.previous_time=0;this.controlbarHolder.on("click",function(a){a.preventDefault()});this.videoHolder.on("mouseenter",
jQuery.proxy(this.onMouseEnter,this)).on("mouseleave",jQuery.proxy(this.onMouseLeave,this)).on("mousemove",jQuery.proxy(this.onMouseMove,this));if(DOMUtil.isIOSDevice()&&(DOMUtil.isIPhone()||DOMUtil.isIPod()))this.videoHolder.find("video").on("webkitbeginfullscreen",jQuery.proxy(this._onWebkitBeginFullscreen,this)).on("webkitendfullscreen",jQuery.proxy(this._onWebkitEndFullscreen,this));$(document).keydown(jQuery.proxy(this._onKeyDown,this));if(!DOMUtil.isIOSDevice()&&!DOMUtil.isUIWebView()||window.self!=
window.top)$(window).on("resize",jQuery.proxy(this._onResize,this));$(window).on("message",jQuery.proxy(this._onPostMessage,this));b=this.render();this._updateSize();return b};d.prototype._seek=function(a){LOGGING&&Log.info(this._LOGTAG,"_seek to "+a+", disabling onVideoTimeUpdate and onVideoProgress");this.previous_time=a;this._$videoPlayer.off("timeupdate",$.proxy(this.onVideoTimeUpdate,this));this._$videoPlayer.off("progress",$.proxy(this.onVideoProgress,this));this.playPauseControl.isPlaying()?
this.videoPlayer.setCurrentTime(a):(this.videoPlayer.play(),this.videoPlayer.setCurrentTime(a),this.videoPlayer.pause());DOMUtil.isIPhone(window)&&(window.location.hash="#",window.location.hash="#share",this._$fullScreenElement.get(0).removeAttribute("controls"));var b=this.durationControl.getDuration();this._seekingTo=a;this.progressControl.updateProgressBar(a/b);this.durationControl.updateCurrentTime(a);this._$videoPlayer.on("progress",$.proxy(this.onVideoProgress,this));this._$videoPlayer.on("timeupdate",
$.proxy(this.onVideoTimeUpdate,this));this._$videoPlayer.on("duration",$.proxy(this.onVideoDurationChange,this));this._$videoPlayer.on("seeked",$.proxy(this.hideLoader,this));this.playPauseControl.acceptsReplay()&&this.playPauseControl.showPauseState();LOGGING&&Log.info(this._LOGTAG,"_seek to "+a+", enabling onVideoTimeUpdate and onVideoProgress")};d.prototype._onKeyDown=function(a){var b=a.keyCode,k=this;if(32==b||39==b||37==b)a.stopImmediatePropagation(),a.preventDefault(),a.stopPropagation(),LOGGING&&
Log.info(this._LOGTAG,"_onKeyDown: "+b),32==b?this._onPlayPauseVideoContainer(a):39==b?this.videoPlayer.getCurrentTime(function(a){a+=com$adobe$ccv$app.Constants.DEFAULT_FAST_FORWARD;var b=k.durationControl.getDuration();a>b&&0.5>a-b&&(a=b);a<=b&&(k._seek(a),k.showControls())}):37==b&&this.videoPlayer.getCurrentTime(function(a){a-=com$adobe$ccv$app.Constants.DEFAULT_FAST_FORWARD;0>a&&(a=0);k._seek(a);k.showControls()})};d.prototype.setupSelectors=function(){var a=this,b=this.$el;this.videoHolder=
b.find("#html5-video-holder");this._videoJSElement=b.find("#video-js");this._$fullScreenElement=this.videoHolder;DOMUtil.isIOSDevice()?this._$fullScreenElement=this.videoHolder.find("video"):this._$fullScreenElement=this.videoHolder;this._videoHolder=this.videoHolder.get(0);this.controlbarHolder=b.find("#videocontrols");this._$progressHolderNew=b.find(".timelinewrap");this._$volumeHolderNew=b.find(".volumecontrols");this.spinner=b.find("#spinner");this._videoSurface=this.videoHolder.find("#video-surface");
this._loadingSpinner=this._videoSurface.find(".spinnerwrap");var k=-1E3,c=-1E3;b.find("#video-surface").on("mouseenter",function(a){k=c=-1E3}).on("mousedown",function(a){k=a.clientX;c=a.clientY}).on("mouseup",function(b){LOGGING&&-1E3==k&&Log.info(a._LOGTAG,"Mouse up w/o down, this is no click");-1E3!=k&&-1E3!=c&&(k=Math.abs(b.clientX-k),c=Math.abs(b.clientY-c),LOGGING&&20<=k&&Log.info(a._LOGTAG,"Mouse moved, this is no click: delta X="+k),LOGGING&&20<=c&&Log.info(a._LOGTAG,"Mouse moved, this is no click: delta Y="+
c),20>k&&20>c&&a._onPlayPauseVideoContainer(),k=c=-1E3)})};d.prototype.setupDefaults=function(){this._hasSources=!1;this._lastTime=0;this.hasEverPlayed=this._changedQuality=!1;this._autoHideControlsTimer=-1;this._lastClick=DOMUtil.now()};d.prototype.addSubscribers=function(){};d.prototype.render=function(){this.showLoader()._addVideoSubscribers()._addControlSubscribers()._initializeControls()._initializeVideo();return this};d.prototype._initializeVideo=function(){var a=this;if(DOMUtil.isIOSDevice()&&
!this._options.playVideoOnInit&&this._options.autoPlay){var h=document.querySelector("video");h.setAttribute("muted","");h.setAttribute("playsinline","");this._$fullScreenElement.get(0).removeAttribute("controls")}this._options.allowairplay&&this._$videoPlayer.setAttr("x-webkit-airplay","allow");this._$videoPlayer.setAttr("preload",this._options.preload);!this._$videoPlayer.getAttr("src")&&this._options.sources&&(LOGGING&&Log.info(this._LOGTAG,"_initializeVideo: _hasSources = true"),this._hasSources=
!0);this._hasSources&&1==this._options.sources.length&&this._options.sources[0].src.length&&this.setVideoSource(this._options.sources[0].src);h=this.calculateStartOffset(this._options.offsetTime);0<h&&this.setVideoStartOffset(h);0<=this._options.volume?this.videoPlayer.setVolume(this._options.volume):this.videoPlayer.setVolume(this.loadSettings());a.volumeControlNew.setVolume(this._options.volume);this.videoPlayer.load();if(this._options.playVideoOnInit)this.hidePlayIcon(),this.play(),this._delayAutoHideControls(2500);
else if(this._options.autoPlay)a.sendDunamisEvent(b.START),h=document.querySelector("video").play(),void 0!==h?h.then(function(){a.enablePlayControls()})["catch"](function(b){a._options.muted||(a.videoPlayer.setVolume(a.loadSettings()),a.volumeControlNew.setVolume(this._options.volume))}):a.enablePlayControls();else if(!DOMUtil.isMobileDevice())this._$videoPlayer.on("audioloaded",jQuery.proxy(this._onAudioLoaded,this));return this};d.prototype.setVideoStartOffset=function(a){var b=this,k=document.querySelector("video"),
c=!1;DOMUtil.isAndroid()&&DOMUtil.isChrome()&&this._options.playVideoOnInit||DOMUtil.isIOS()?k.addEventListener("canplaythrough",function(){if(!c){var k=document.querySelector("video");k.pause();b.showLoader();setTimeout(function(){k.currentTime=a;k.play();b.hideLoader()},DOMUtil.isIOS()?3E3:4E3);c=!0}}):DOMUtil.isFireFox()||DOMUtil.isEdge()||DOMUtil.isChromeDesktop()?this.videoPlayer.setCurrentTime(a):(k.addEventListener("loadedmetadata",function(){k.currentTime=a}),k.addEventListener("canplaythrough",
function(){c||(k.currentTime=a,c=!0)}))};d.prototype.enablePlayControls=function(){this.hideControls();this.hidePlayIcon();this.playPauseControl.showPlayState()};d.prototype._addVideoSubscribers=function(){LOGGING&&Log.info(this._LOGTAG,"_addVideoSubscribers");this._$videoPlayer.on("canplay",jQuery.proxy(this._onVideoCanPlay,this)).on("ended",jQuery.proxy(this._onVideoComplete,this)).on("error",jQuery.proxy(this._onVideoError,this)).on("pause",jQuery.proxy(this._onVideoPause,this)).on("rewind",jQuery.proxy(this._onVideoRewind,
this));return this};d.prototype._setupDurationControl=function(){var a=this;this.videoPlayer.getDuration(function(b){LOGGING&&Log.info(a._LOGTAG,"_onVideoCanPlay got duration: "+b);0!=b?(a._gotDuration=!0,a.durationControl&&a.durationControl.setDuration(b),a.progressControl&&a.progressControl.setDuration(b)):(LOGGING&&Log.info(a._LOGTAG,"_onVideoCanPlay, duration is 0, disabling progressbar"),a.progressControl.disable())})};d.prototype.hidePlayIcon=function(){this.videoHolder.removeClass("idle");
this.controlbarHolder.addClass("loaded");this.controlbarHolder.removeClass("hide").addClass("show");this.controlbarHolder.trigger("mousemove")};d.prototype._onAudioLoaded=function(a){this.controlbarHolder.addClass("loaded");this.controlbarHolder.removeClass("hide").addClass("show")};d.prototype.displayPlayIcon=function(a){this._options.playVideoOnInit||this._options.autoPlay||this._dataLoaded||this.videoHolder.addClass("idle")};d.prototype._onVideoCanPlay=function(a){var b=this;LOGGING&&Log.info(this._LOGTAG,
"_onVideoCanPlay");this._setupDurationControl();setTimeout(function(){b.controlbarHolder.addClass("loaded");b.controlbarHolder.removeClass("hide").addClass("show")},DOMUtil.isMobileDevice()?0:1E3);this._$videoPlayer.on("timeupdate",$.proxy(this.onVideoTimeUpdate,this)).on("progress",$.proxy(this.onVideoProgress,this));this._options.playVideoOnInit||this._options.autoPlay||this.playPauseControl.showPauseState();this.hideLoader()};d.prototype.destroy=function(){this._$videoPlayer.off("canplay",jQuery.proxy(this._onVideoCanPlay,
this)).off("ended",jQuery.proxy(this._onVideoComplete,this)).off("error",jQuery.proxy(this._onVideoError,this)).off("pause",jQuery.proxy(this._onVideoPause,this)).off("timeupdate",$.proxy(this.onVideoTimeUpdate,this)).off("progress",$.proxy(this.onVideoProgress,this)).off("duration",$.proxy(this.onVideoDurationChange,this));this._gotDuration=!1};d.prototype.setVideoSource=function(a){LOGGING&&Log.info(this._LOGTAG,"setVideoSource: "+a);this.videoPlayer.setSrc(a);return this};d.prototype._initializeControls=
function(){LOGGING&&Log.info(this._LOGTAG,"_initializeControls");this.playPauseControl=new com$adobe$ccv$controls.PlayPauseControl({el:this.controlbarHolder});this.volumeControlNew=new com$adobe$ccv$controls.VolumeControl({el:this._$volumeHolderNew,volume:this._options.volume});this.durationControl=new com$adobe$ccv$controls.DurationControl({el:this.controlbarHolder.find(".videotime"),duration:"00:00",time:"00:00"});this.progressControl=new com$adobe$ccv$controls.ProgressControl({el:this._$progressHolderNew,
videoInfo:this._videoJSElement});if(this._gotDuration=0<this._options.duration)this.durationControl.setDuration(this._options.duration),this.progressControl.setDuration(this._options.duration);DOMUtil.noFullscreenButton()?LOGGING&&Log.info(this._LOGTAG,"_initializeControls: skipping ScreenControl"):(this.screenControl=new com$adobe$ccv$controls.ScreenControl({el:this.controlbarHolder}),this.screenControl.setFullScreenHandler(this));this.videoHolder.removeClass("disable");this.videoHolder.addClass("enable");
return this};d.prototype._addControlSubscribers=function(){LOGGING&&Log.info(this._LOGTAG,"_addControlSubscribers");var a=this;this.controlbarHolder.on("play",function(b){LOGGING&&Log.info(a._LOGTAG,"_addControlSubscribers: play");a.play()}).on("pause",function(b){LOGGING&&Log.info(a._LOGTAG,"_addControlSubscribers: pause");a.pause()});this._$progressHolderNew.on("progressUpdate",function(a){}).on("progressDown",function(){LOGGING&&Log.info(a._LOGTAG,"progressDown");a.showLoader()}).on("progressUp",
function(b){b=a.durationControl.getDuration();var k=a.progressControl.getPercent();b*=k;LOGGING&&Log.info(a._LOGTAG,"progressUp: updating to "+b);a._seek(b)});this._$volumeHolderNew.on("volumeUpdate",function(b){a._options.volume=b.percent;a.videoPlayer.setVolume(b.percent);a.saveSettings()});return this};d.prototype.changeVideo=function(a){this._changedQuality=!0;this.showLoader().setVideoSource(a).pause().destroy();this.videoPlayer.load();this._gotDuration=!1;return this};d.prototype.pause=function(){var a=
this;this.videoPlayer.pause();this.playPauseControl&&this.playPauseControl.showPauseState();this._playAfterExitFullscreen=!1;this.showControls();this._killAutoHideControls();this.isVideoCompletelyWatched||this.videoPlayer.getCurrentTime(function(h){a.sendDunamisEvent(b.PAUSE,Math.round(h))});return this};d.prototype.isValidOffsetParameter=function(a,b,k,c){return 1<a||1<k||1<b||0<c?!1:!0};d.prototype.calculateStartOffset=function(a){var b=0,k=this._options.duration,c=(a.match(/m/g)||[]).length,d=
(a.match(/s/g)||[]).length,e=(a.match(/h/g)||[]).length,f=(a.match(/[^msh0-9]/g)||[]).length,q=c+d+e,l=0,r=0,v=0;this.isValidOffsetParameter(c,d,e,f)&&(0==q?b=parseInt(a):(0!=e&&(a=a.split("h"),l=parseInt(a[0]),a=a[1]),0!=c&&(a=a.split("m"),r=parseInt(a[0]),a=a[1]),0!=d&&(a=a.split("s"),v=parseInt(a[0]),a=a[1])),isFinite(v)&&isFinite(r)&&isFinite(l)&&""==a&&(b=3600*l+60*r+v));b>=Math.floor(k)&&(b=0);return b};d.prototype.play=function(){var a=this;this.hideControls();this.videoPlayer.play();this.playPauseControl&&
this.playPauseControl.showPlayState();this.progressControl.enable();this.videoHolder.hasClass("idle")?(this.hidePlayIcon(),this.sendDunamisEvent(b.START)):this.isVideoCompletelyWatched?(this.sendDunamisEvent(b.REPLAY),this.isVideoCompletelyWatched=!1):this.isPlayedAfterPause&&this.videoPlayer.getCurrentTime(function(h){a.sendDunamisEvent(b.RESUME,Math.round(h))});return this};d.prototype.onMouseEnter=function(a){this.showControls()};d.prototype.onMouseLeave=function(a){this.hasEverPlayed&&this.playPauseControl.isPlaying()&&
this.hideControls()};d.prototype.onMouseMove=function(a){DOMUtil.useMobileTheme()?this._delayAutoHideControls():this.showControls()};d.prototype._killAutoHideControls=function(){0<=this._autoHideControlsTimer&&(clearTimeout(this._autoHideControlsTimer),this._autoHideControlsTimer=-1)};d.prototype._delayAutoHideControls=function(a){void 0===a&&(a=this._autoHideControlsTimeoutMS);this.hasEverPlayed&&(this._killAutoHideControls(),this._autoHideControlsTimer=setTimeout(jQuery.proxy(this.hideControls,
this),a))};d.prototype.showControls=function(){this.controlbarHolder.removeClass("hide").addClass("show");this.playPauseControl.isPlaying()&&this._delayAutoHideControls();this.$el.trigger("showControls")};d.prototype.hideControls=function(){this._options.autoHide&&this._hideControls()};d.prototype._hideControls=function(){this.progressControl.isSliding()?this._delayAutoHideControls():(LOGGING&&Log.info(this._LOGTAG,"hideControls"),this.hasEverPlayed=!0,this._killAutoHideControls(),this.controlbarHolder.removeClass("show").addClass("hide"),
this.$el.trigger("hideControls"))};d.prototype._onPlayPauseVideoContainer=function(a){DOMUtil.useMobileTheme()&&!this.controlbarHolder.hasClass("show")?this.showControls():this.playPauseControl.isPlaying()?(LOGGING&&Log.info(this._LOGTAG,"_onPlayPauseVideoContainer: play -> pause."),this.pause()):(LOGGING&&Log.info(this._LOGTAG,"_onPlayPauseVideoContainer: pause -> play."),this.play())};d.prototype.sendDunamisEvent=function(a,b){this.dunamisEventSender.sendEvent(DunamisEventFactory.getEvent(a,b))};
d.prototype.showLoader=function(){this.spinner.addClass("show").removeClass("hide");DOMUtil.isIPhone(window)||this._loadingSpinner.show();return this};d.prototype.hideLoader=function(){if(this._dataLoaded||DOMUtil.isEdge()||DOMUtil.isIOS()||DOMUtil.isIE())this.displayPlayIcon(),this._dataLoaded=!0,this.spinner.removeClass("show").addClass("hide"),DOMUtil.isIPhone(window)||this._loadingSpinner.hide();return this};d.prototype.onDataLoad=function(){this.displayPlayIcon();this._dataLoaded=!0;return this.hideLoader()};
d.prototype.onVideoTimeUpdate=function(a){this.onVideoProgress(a)};d.prototype.onVideoDurationChange=function(a){this.videoPlayer.getDuration(function(a){this.durationControl.setDuration(a);this.durationControl.setDuration(a);this.progressControl.setDuration(a);this.progressControl.setDuration(a);0<a?(this.progressControl.enable(),this.progressControl.enable()):(this.progressControl.disable(),this.progressControl.disable())})};d.prototype.onVideoProgress=function(a){var c=this;this._gotDuration||
this._setupDurationControl();if(this.playPauseControl.isPlaying()){var k=this.durationControl.getDuration();this.videoPlayer.getCurrentTime(function(a){LOGGING&&!k&&Log.info(c._LOGTAG,"onVideoProgress: duration is null");LOGGING&&!a&&Log.info(c._LOGTAG,"onVideoProgress: current is null");LOGGING&&k&&a&&-1!=c._seekingTo&&Log.info(c._LOGTAG,"onVideoProgress: skipping updates during seeking, "+a+" > "+c._seekingTo);c.durationControl.updateCurrentTime(a);a-c.previous_time>=c.logging_interval&&(c.previous_time=
a,c.sendDunamisEvent(b.ENGAGEMENT,c.percent_played));if(k&&a&&a>=c._seekingTo){var d=a/k;c._seekingTo=-1;c.progressControl.updateProgressBar(d)}c._lastTime=a;c._rewind&&0<=a&&1>a&&(LOGGING&&Log.info(c._LOGTAG,"onVideoProgress: rewind completed"),c._rewind=!1)})}};d.prototype._onVideoComplete=function(a){LOGGING&&Log.info(this._LOGTAG,"_onVideoComplete");this.isVideoCompletelyWatched||(this.isVideoCompletelyWatched=!0,this.sendDunamisEvent(b.COMPLETE));this._rewind?(LOGGING&&Log.info(this._LOGTAG,
"_onVideoComplete: rewinding"),this._rewind=!1,this._seek(0),this.videoPlayer.setCurrentTime(0),this.progressControl.updateProgressBar(0),this.durationControl.updateCurrentTime(0)):this.playPauseControl.isPlaying()&&(LOGGING&&Log.info(this._LOGTAG,"_onVideoComplete: play -> pause"),this.pause(),this.hasEverPlayed=this._playAfterExitFullscreen=!1,this.showControls(),this._killAutoHideControls(),this._seekingTo=-1,this._options.withAutoRewind?(LOGGING&&Log.info(this._LOGTAG,"_onVideoComplete: auto-rewinding"),
this.videoPlayer.setCurrentTime(0),this.progressControl.updateProgressBar(0),this.durationControl.updateCurrentTime(0),this.play()):(LOGGING&&Log.info(this._LOGTAG,"_onVideoComplete: showing replay state"),a=this.durationControl.getDuration(),this.progressControl.updateProgressBar(100),this.durationControl.updateCurrentTime(a),this.playPauseControl.showReplayState()))};d.prototype._onVideoError=function(a){};d.prototype._onVideoPause=function(a){LOGGING&&Log.info(this._LOGTAG,"_onVideoPause");this.playPauseControl.isPlaying()&&
this.playPauseControl.showPauseState()};d.prototype._onVideoRewind=function(a){var b=this;LOGGING&&Log.info(this._LOGTAG,"_onVideoRewind");this._rewind=!0;this._seek(0);setTimeout(function(){b.isPlayedAfterPause=!1;b.play();b.isPlayedAfterPause=!0},300)};d.prototype._onWebkitBeginFullscreen=function(a){LOGGING&&Log.info(this._LOGTAG,"_onWebkitBeginFullscreen")};d.prototype._onWebkitEndFullscreen=function(a){LOGGING&&Log.info(this._LOGTAG,"_onWebkitEndFullscreen");this.volumeControlNew.setVolume(this.videoPlayer.getVolume());
window.location.hash="#";window.location.hash="#share";this._$fullScreenElement.get(0).removeAttribute("controls");this._checkReplay();this._updateSize();this.pause()};d.prototype.goFullscreen=function(a){LOGGING&&Log.info(this._LOGTAG,"goFullscreen");a||(a=this._$fullScreenElement.get(0));this._playAfterExitFullscreen=this.playPauseControl.isPlaying();this.videoPlayer.goFullscreen(a)};d.prototype.exitFullscreen=function(){LOGGING&&Log.info(this._LOGTAG,"exitFullScreen");this.videoPlayer.exitFullscreen();
this._checkReplay();this._playAfterExitFullscreen&&(this._playAfterExitFullscreen=!1,this.play());this._updateSize()};d.prototype._checkReplay=function(){if(DOMUtil.isIPhone()||DOMUtil.isIPod()){var a=this,b=this.durationControl.getDuration();this.showControls();this._killAutoHideControls();this.videoPlayer.getCurrentTime(function(c){b&&c&&(0.1>b-c?(LOGGING&&Log.info(a._LOGTAG,"exitFullscreen: showing replay state"),a._playAfterExitFullscreen=!1,a.hasEverPlayed=!1,b=a.durationControl.getDuration(),
a.progressControl.updateProgressBar(100),a.durationControl.updateCurrentTime(b),a.playPauseControl.showReplayState()):(a.progressControl.updateProgressBar(c/b),a.durationControl.updateCurrentTime(c)))})}};d.prototype.changeSize=function(a,b){LOGGING&&Log.info(this._LOGTAG,"changeSize: "+a+", "+b);var c=this.spinner,d=this.$el.width(),e=this.$el.height(),d=a/2-d/2,e=b/2-e/2;LOGGING&&Log.info(this._LOGTAG,"changeSize spinner: "+d+", "+e+"("+c.width()+", "+c.height()+")");c.css("left",d.toString()+"px");
c.css("top",e.toString()+"px");this.videoPlayer.changeSize(a,b);c=this._videoJSElement.offset().top+this._videoJSElement.outerHeight(!0)-this.controlbarHolder.outerHeight(!0);this.progressControl.changeSize(a,b);this.controlbarHolder.width(this.videoPlayer.getSize().width);this.controlbarHolder.css("bottom","");this.controlbarHolder.css("top",c+"px");this.videoHolder.width(a);this.videoHolder.height(b)};d.prototype.getSize=function(){return{width:this.videoHolder.width(),height:this.videoHolder.height()}};
d.prototype._updateSize=function(){var a=DOMUtil.windowInnerWidth(),b=DOMUtil.windowInnerHeight();LOGGING&&Log.info(this._LOGTAG,"_updateSize: using window w="+a+", h="+b);this.changeSize(a,b)};d.prototype._onResize=function(a){LOGGING&&Log.info(this._LOGTAG,"_onResize");this._updateSize()};d.prototype._onPostMessage=function(a){(a=a.originalEvent.data)&&"string"==typeof a&&0==a.indexOf("resize::")&&(LOGGING&&Log.info(this._LOGTAG,"_onPostMessage: "+a),this._updateSize())};d.prototype.saveSettings=
function(){CookiesUtil.createCookie("volume",this._options.volume.toString())};d.prototype.loadSettings=function(){this._options.volume=parseFloat(CookiesUtil.readCookie("volume"));isNaN(this._options.volume)&&(this._options.volume=0.5);return this._options.volume};return d}(e.BaseView);e.CoreView=a})(com$adobe$ccv$view||(com$adobe$ccv$view={}));
(function(e){var f=function(b){function a(a){b.call(this,a)}__extends(a,b);a.prototype.createVideoPlayer=function(){return null};a.prototype.createCoreViewOptions=function(a,b,e,h){var k=this.configuration.isConfigOptionEnabled("lazyLoading"),m=this.configuration.isConfigOptionEnabled("autoplay"),t=this.configuration.isConfigOptionEnabled("loop"),B=this.configuration.isConfigOptionEnabled("muted"),f=this.configuration.getConfigValue("offset","0");return{el:a,volume:-1,duration:parseFloat(this.configuration.getConfigValue("duration")),
autoPlay:m,playVideoOnInit:k,offsetTime:f,autoHide:"false"!==this.configuration.getConfigValue("autohide"),preload:"metadata",allowairplay:!0,embedded:!1,poster:e,videoPlayer:h,sources:[{src:b,bitrate:"480",quality:"MED",defaultVideo:!0}],withAutoRewind:t,muted:B}};a.prototype.embedPlayer=function(b,d,e){LOGGING&&Log.info(a._LOGTAG,"_embedPlayer");var h=this.createVideoPlayer();b=this.createCoreViewOptions(b,d,e,h);this._player=new com$adobe$ccv$view.CoreView(b)};a.prototype.setPoster=function(a){b.prototype.setPoster.call(this,
a);this.element.find("#html5-video").attr("poster",a)};a.prototype._isSVGAvailable=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect};a.prototype.updateHtml=function(a,b,e){e&&e.length&&DOMUtil.setHtml(a.find("#html5-video-poster"),'<img src="'+e+'" class="poster"/>');(!this._isSVGAvailable()||"false"==this.configuration.getConfigValue("svg")||DOMUtil.isIE()||DOMUtil.isEdge())&&a.find("#videocontrols").addClass("use-png");DOMUtil.setHtml(a.find("#videocontrols"),
'<div class="videogradient"></div><div class="timelinewrap"><div class="timelineknob"><div class="timeknob"></div></div><div class="duration"> 0.00 </div><div class="videotimewrap"><input class="timelineslide" type="range"  min="0" max="1" step="0.0001" ><div class="timeline" style="width:0%;"></div><div class="buffer" style="left: 0px; right: 0%;"></div><div class="track"></div><div class="hoverline dark"></div></div></div><div class="controlsleft"><button class="playpause videobutton playicon">play</button><div class="videotime"><span class="timelabel">0:00</span><span class="vduration"></span></div></div><div class="controlsright"><div class="volumecontrols"><button class="videobutton mute level2 muteicon">mute</button><span class="standard volumewrap"><div class="slidelabel" style="display:none;"><span class="sll">Volume</span><span class="slr volumelevel">0</span></div><div style="position:relative;z-index:1;height:100%;"><input type="range" class="slider volume" value="100" max="100"></div></span><div class="volumeslide"><div class="volumetracks"><div class="volumetrack"></div><div class="volumefill" style="width: 0%;"></div></div><div class="volumeknob" style="transform: translateX(-48px);"><div class="volumeknobfill"></div></div></div></div><button class="videobutton fullscreen">fullscreen</button></div>')};
a.prototype.onError=function(){b.prototype.onError.call(this);"INIT"==this.state&&(this._player=null)};a.prototype.initTask=function(){var c=this.element;LOGGING&&Log.info(a._LOGTAG,"NativeCloudPlayer: init, "+c.find("#html5-video").length);"skin"==this.configuration.getConfigValue("test")&&c.find("#videocontrols").removeClass("hide").addClass("show");c.find("#html5-video").on("canplay",function(){LOGGING&&Log.info(a._LOGTAG,"Video: canplay");c.find("#videocontrols").removeClass("hide").addClass("show")}).on("error",
function(){LOGGING&&Log.info(a._LOGTAG,"Video: error")});b.prototype.initTask.call(this)};a.prototype.attachTo=function(a,d,e,h,k,m,t){this._player=null;return b.prototype.attachTo.call(this,a,d,e,h,k,m,t)};a.prototype.getPromise=function(){return this.deferred.promise()};a.prototype.getCoreView=function(){return this._player};a._LOGTAG="HTMLCloudPlayer";return a}(e.CloudPlayer);e.HTMLCloudPlayer=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));var com$adobe$ccv$videojs;
(function(e){var f=function(){function b(a,c,d){this.player=null;this._frameHeight=this._frameWidth=0;this._hasReceivedVideoFrameSize=this._hideVideoElement=!1;this._maxFrameHeight=this._maxFrameWidth=0;this._videoHolder=$(a);this.videoElement=this._videoHolder.find("video").first();this._maxFrameHeight=parseInt(d.getConfigValue("maxframeheight"),10);this._maxFrameWidth=parseInt(d.getConfigValue("maxframewidth"),10);a=parseInt(d.getConfigValue("minframeWidth"),10);var e=parseInt(d.getConfigValue("minframeHeight"),
10);isNaN(a)||isNaN(e)?this._setFrameSize(this.videoElement.width(),this.videoElement.height()):this._setFrameSize(a,e);if(0==this.videoElement.length)this._videoHolder.css("visibility","hidden"),this.videoElement=$("object").first();else{if(!DOMUtil.isEdge())c.on(VideoJSEvents.LOADEDDATA,jQuery.proxy(this._onVideoElementLoaded,this));this._hideVideoElement=DOMUtil.isIPhone()||DOMUtil.isIPod();"true"==d.getConfigValue("debug")&&d.getConfigValue("hideVideoElement")&&(this._hideVideoElement="true"==
d.getConfigValue("hideVideoElement"));LOGGING&&Log.info(b._LOGTAG,"this._hideVideoElement = "+this._hideVideoElement);LOGGING&&Log.info(b._LOGTAG,"this.videoElement.is(':hidden') = "+this.videoElement.is(":hidden"));this._hideVideoElement&&(this._hideVideo(),LOGGING&&Log.info(b._LOGTAG,"this.videoElement.is(':hidden') = "+this.videoElement.is(":hidden")),LOGGING&&Log.info(b._LOGTAG,"videoElement.hide() on VideoJSVideoPlayer constructor."))}this.player=c}b.prototype._setFrameSize=function(a,c){LOGGING&&
Log.info(b._LOGTAG,"_setFrameSize: "+a+", "+c);this._frameWidth=a;this._frameHeight=c};b.prototype._hideVideo=function(){};b.prototype._showVideo=function(){};b.prototype._onLOADEDDATA=function(a){LOGGING&&Log.info(b._LOGTAG,"Video: MediaEvent.LOADEDDATA");this.player.off(VideoJSEvents.LOADEDDATA,jQuery.proxy(this._onLOADEDDATA,this));var c=this.videoElement.get(0);a=c.vjs_getProperty("videoWidth");c=c.vjs_getProperty("videoHeight");a&&c?(LOGGING&&Log.info(b._LOGTAG,"_onLOADEDDATA: frameWidth="+a+
", frameHeight="+c),this._frameWidth=a,this._frameHeight=c,this._hasReceivedVideoFrameSize=!0,this.trigger("frameloaded",null)):this.trigger("audioloaded",null);this.changeSize(DOMUtil.windowInnerWidth(),DOMUtil.windowInnerHeight());this._videoHolder.css("visibility","visible");$(window).trigger("resize")};b.prototype._onVideoElementLoaded=function(a){this.player.off(VideoJSEvents.LOADEDDATA,jQuery.proxy(this._onLOADEDDATA,this));a=this.videoElement.get(0);0!=a.videoWidth&&0!=a.videoHeight?(this._hasReceivedVideoFrameSize=
!0,this._setFrameSize(a.videoWidth,a.videoHeight),this.trigger("frameloaded",null)):this.trigger("audioloaded",null);$(window).trigger("resize")};b.prototype.getVolume=function(){return this.player.muted()?0:this.player.volume()};b.prototype.setVolume=function(a){LOGGING&&Log.info(b._LOGTAG,"setVolume: "+a);this.player.volume(a);0==a?this.player.muted(!0):this.player.muted(!1);var c=this.videoElement.get(0);c&&"volume"in c&&(c.volume=a)};b.prototype.getSrc=function(){return this.player.src()};b.prototype.setSrc=
function(a){LOGGING&&Log.info(b._LOGTAG,"setSrc: "+a);this.player.src(a)};b.prototype.getPlaybackRate=function(){return this.player.playbackRate()};b.prototype.setPlaybackRate=function(a){this.player.playbackRate(a)};b.prototype.getDuration=function(a){a(this.player.duration())};b.prototype.getMuted=function(){return this.player.muted()};b.prototype.setMuted=function(a){this.player.muted(a)};b.prototype.getDefaultPlaybackRate=function(){return this.player.defaultPlaybackRate()};b.prototype.setDefaultPlaybackRate=
function(a){this.player.defaultPlaybackRate(a)};b.prototype.getPaused=function(){LOGGING&&Log.info(b._LOGTAG,"getPaused: "+this.player.paused());return this.player.paused()};b.prototype.getSeeking=function(){return this.player.seeking()};b.prototype.getCurrentTime=function(a){a(this.player.currentTime())};b.prototype.setCurrentTime=function(a){this.player.currentTime(a)};b.prototype.getNetworkState=function(){return this.player.networkState()};b.prototype.getPoster=function(){return this.player.poster()};
b.prototype.setPoster=function(a){LOGGING&&Log.info(b._LOGTAG,"setPoster: "+a)};b.prototype.pause=function(){LOGGING&&Log.info(b._LOGTAG,"pause");this.player.pause();LOGGING&&Log.info(b._LOGTAG,"this.videoElement.is(':hidden') = "+this.videoElement.is(":hidden"));this._hideVideoElement&&8>DOMUtil.getIOSVersion()&&(LOGGING&&Log.info(b._LOGTAG,"IOS version < 8 videoElement.hide() on pause()."),this._hideVideo(),LOGGING&&Log.info(b._LOGTAG,"this.videoElement.is(':hidden') = "+this.videoElement.is(":hidden")))};
b.prototype.play=function(){LOGGING&&Log.info(b._LOGTAG,"play");LOGGING&&Log.info(b._LOGTAG,"this.videoElement.is(':hidden') = "+this.videoElement.is(":hidden"));this._hideVideoElement&&8>DOMUtil.getIOSVersion()&&(LOGGING&&Log.info(b._LOGTAG,"IOS version < 8 videoElement.show() on play()."),this._showVideo(),LOGGING&&Log.info(b._LOGTAG,"this.videoElement.is(':hidden') = "+this.videoElement.is(":hidden")));this.player.play()};b.prototype.load=function(){};b.prototype.setAutoplay=function(a){this.player.autoplay(a)};
b.prototype.getAutoplay=function(){return this.player.autoplay()};b.prototype.canPlayType=function(a){return this.player.canPlayType(a)};b.prototype.getAttr=function(a){LOGGING&&Log.info(b._LOGTAG,"getAttr: "+a);return this._videoHolder.css(a)};b.prototype.setAttr=function(a,c){LOGGING&&Log.info(b._LOGTAG,"setAttr: "+a+" <= "+c);this._videoHolder.css(a,c)};b.prototype.on=function(a,c){LOGGING&&Log.info(b._LOGTAG,"on: "+a);this._videoHolder.on(a,null,null,c);return this};b.prototype.off=function(a,
c){LOGGING&&Log.info(b._LOGTAG,"off: "+a);this._videoHolder.off(a,null,c);return this};b.prototype.trigger=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];this._videoHolder.triggerHandler(a,b);return this};b.prototype.goFullscreen=function(a){LOGGING&&Log.info(b._LOGTAG,"goFullscreen");var c=this.videoElement.get(0);this._hideVideoElement&&(LOGGING&&Log.info(b._LOGTAG,"videoElement.show() on VideoJSVideoPlayer.goFullscreen()."),this._showVideo());this._bgcolor=this._videoHolder.css("background-color");
this.videoElement.css("background-color","black");this._videoHolder.css("background-color","black");this._videoHolder.find("#video-js").css("background-color","black");var d=DOMUtil.isWebView();a===c&&c.paused&&c.networkState<=c.HAVE_METADATA?(c.play(),setTimeout(function(){c.pause();FullscreenUtil.goFullscreen(d?c:a)},0)):FullscreenUtil.goFullscreen(d?c:a)};b.prototype.exitFullscreen=function(){LOGGING&&Log.info(b._LOGTAG,"exitFullscreen");FullscreenUtil.exitFullscreen();this._bgcolor&&(this.videoElement.css("background-color",
this._bgcolor),this._videoHolder.css("background-color",this._bgcolor),this._videoHolder.find("#video-js").css("background-color",this._bgcolor),this._bgcolor=null);this._hideVideoElement&&(LOGGING&&Log.info(b._LOGTAG,"videoElement.hide() on VideoJSVideoPlayer.exitFullscreen()."),this._hideVideo())};b.prototype.changeSize=function(a,c){var d=c;this._videoHolder.width(a);this._videoHolder.height(c);var e=this._frameWidth,h=this._frameHeight,k=!1;if(this._hasReceivedVideoFrameSize||isNaN(this._maxFrameWidth)&&
isNaN(this._maxFrameHeight)){if(e&&h&&(a!=e||c!=h)){LOGGING&&a!=e&&Log.info(b._LOGTAG,"changeSize: w != fw, "+a+"!="+e);LOGGING&&c!=h&&Log.info(b._LOGTAG,"changeSize: h != fh, "+c+"!="+h);var m=c;c=a/e*h;c>m&&(c=m,a=c/h*e)}a=Math.round(a);c=Math.round(c)}else k=!0,isNaN(this._maxFrameHeight)?a=this._maxFrameWidth:c=this._maxFrameHeight;LOGGING&&Log.info(b._LOGTAG,"changeSize: w="+a+", h="+c);this.videoElement.width(a);this.videoElement.height(c);this.player.width(a);this.player.height(c);!k&&d>c?
$(this.player.el()).css("top",Math.round((d-c)/2)+"px"):$(this.player.el()).css("top","0px")};b.prototype.getSize=function(){return{width:this.videoElement.width(),height:this.videoElement.height()}};b.prototype.hasFlashSkin=function(){return!1};b.prototype.updateFrameSize=function(){var a;if(0==this._frameWidth||0==this._frameHeight)a=this.videoElement.get(0),this._setFrameSize(a.videoWidth,a.videoHeight)};b._LOGTAG="VideoJSVideoPlayer";return b}();e.VideoJSVideoPlayer=f})(com$adobe$ccv$videojs||
(com$adobe$ccv$videojs={}));
(function(e){var f=function(){function b(){this.LOADSTART="loadstart";this.ERROR="error";this.LOADED="loaded";this.LOADEDALLDATA="loadedalldata";this.READY="ready";this.RESIZE="resize";this.PLAY="play";this.TAP="tap";this.DISPOSE="dispose";this.PROGRESS="progress";this.TIMEUPDATE="timeupdate";this.ENDED="ended";this.FULLSCREENCHANGE="fullscreenchange";this.ENTERFULLSCREEN="enterFullScreen";this.EXITFULLSCREEN="exitFullScreen";this.ENTERFULLWINDOW="enterFullWindow";this.EXITFULLWINDOW="exitFullWindow";
this.POSTERCHANGE="posterchange";this.CONTROLSENABLED="controlsenabled";this.CONTROLSDISABLED="controlsdisabled";this.USINGNATIVECONTROLS="usingnativecontrols";this.USINGCUSTOMCONTROLS="usingcustomcontrols";this.USERACTIVE="useractive";this.USERINACTIVE="userinactive";this.CUECHANGE="cuechange";this.DURATIONCHANGE="durationchange";this.ONSRCCHANGE="onsrcchange";this.LOADEDMETADATA="loadedmetadata";this.PLAYING="playing";this.STAGECLICK="stageclick";this.LOADEDDATA="loadeddata";this.CANPLAY="canplay";
this.PAUSE="pause";this.SEEKED="seeked";this.SEEKING="seeking"}b._LOGTAG="VideoJSEvents";return b}();e.VideoJSEventsStatic=f})(com$adobe$ccv$videojs||(com$adobe$ccv$videojs={}));var VideoJSEvents=new com$adobe$ccv$videojs.VideoJSEventsStatic,VideoJSEvents=VideoJSEvents||null;
(function(e){var f=function(b){function a(){b.call(this,"html5");this.$fullScreenElement=this.videoJSPlayer=this.videoPlayer=null;this._isReady=!1}__extends(a,b);a.prototype.setFullScreenElement=function(a){this.$fullScreenElement=a};a.prototype.createVideoPlayer=function(){if(null==this.videoPlayer){var a=this.element.find("#html5-video-holder").get(0);this.videoPlayer=new e.VideoJSVideoPlayer(a,this.videoJSPlayer,this.configuration)}return this.videoPlayer};a.prototype.attachTo=function(a,d,e,h,
k,m,t){var B=$.Deferred();this._config=d;if(this.isAttachedTo(a,e,h,k,m,t))B.resolve(this);else{var f=this;b.prototype.attachTo.call(this,a,d,e,h,k,m,t).done(function(){f._disableVideoJSUI(a);B.resolve(f)}).fail(function(){B.reject(f)})}return B.promise()};a.prototype._disableVideoJSUI=function(a){a=a.find(".video-js");a.find(".vjs-poster").hide();a.find(".vjs-text-track-display").hide();a.find(".vjs-loading-spinner").hide();a.find(".vjs-big-play-button").hide();a.find(".vjs-control-bar").hide()};
a.prototype.setVideoJSPlayer=function(a){a.controls(!1);this.videoJSPlayer=a};a.prototype._showPoster=function(){this.element.find(".vjs-poster").show()};a.prototype._hidePoster=function(){this.element.find(".vjs-poster").hide()};a.prototype.embedPlayer=function(c,d,e){function h(){m.videoPlayer.trigger("canplay",null);m.videoPlayer.updateFrameSize();"visible"!=m.videoPlayer.getAttr("visibility")&&(m.videoPlayer.play(),m.videoPlayer.pause(),m.videoPlayer.setCurrentTime(0),m.videoJSPlayer.posterImage.show(),
m._showPoster())}function k(){var b=m.videoJSPlayer.duration();Infinity===b||isNaN(b)?B>=t?(LOGGING&&Log.error(a._LOGTAG,""),h()):(++B,LOGGING&&Log.info(a._LOGTAG,"Waiting for video-js, attempt #"+B+" of "+t),setTimeout(k,500)):(LOGGING&&Log.info(a._LOGTAG,"video-js is ready, duration="+b),h())}var m=this,t=20,B=0;b.prototype.embedPlayer.call(this,c,d,e);this._registerEvents();k();this.$fullScreenElement&&this.getCoreView().setFullScreenElement(this.$fullScreenElement)};a.prototype._registerEvents=
function(){var b=this.videoJSPlayer;b&&(LOGGING&&Log.info(a._LOGTAG,"registerEvents"),b.on(VideoJSEvents.PROGRESS,jQuery.proxy(this.onPROGRESS,this)),b.on(VideoJSEvents.ENDED,jQuery.proxy(this.onENDED,this)),b.on(VideoJSEvents.PLAY,jQuery.proxy(this.onPLAY,this)),b.on(VideoJSEvents.TIMEUPDATE,jQuery.proxy(this.onTIMEUPDATE,this)),b.on(VideoJSEvents.LOADEDDATA,jQuery.proxy(this.onLOADEDDATA,this)),b.on(VideoJSEvents.SEEKED,jQuery.proxy(this.onSEEKED,this)),b.on(VideoJSEvents.TAP,jQuery.proxy(this.onTAP,
this)),b.tech_.on("network_error",jQuery.proxy(this.onNetworkError,this)),b.tech_.on("network_resolved",jQuery.proxy(this.onNetworkResolved,this)))};a.prototype.registerLoggerOnTimeUpdate=function(a){var b=this,e=b.videoJSPlayer;e&&a&&(e.on(VideoJSEvents.TIMEUPDATE,function(){var h=b.getCurrentTime();a.onTIMEUPDATE(h)}),e.on(VideoJSEvents.PAUSE,function(){var h=b.getCurrentTime();a.onVideoPaused(h)}),e.on(VideoJSEvents.SEEKING,function(){var h=b.getCurrentTime();a.onVideoPaused(h)}))};a.prototype.onSEEKED=
function(a){this.videoPlayer.trigger("seeked",a)};a.prototype.onLOADEDDATA=function(a){this.getCoreView().onDataLoad()};a.prototype.onPROGRESS=function(a){!this._isReady&&0<this.getDuration()&&(this._isReady=!0,this.videoPlayer.trigger("duration",a))};a.prototype.onENDED=function(b){LOGGING&&Log.info(a._LOGTAG,"Video: MediaEvent.COMPLETE");this.videoPlayer.trigger("ended",b)};a.prototype.getCurrentTime=function(){return this.videoJSPlayer.currentTime()};a.prototype.getDuration=function(){var a=this.videoJSPlayer.duration(),
b;this._config&&(b=parseFloat(this._config.getConfigValue("duration")),isNaN(b)||(a=b));return a};a.prototype.onPLAY=function(b){LOGGING&&Log.info(a._LOGTAG,"Video: MediaEvent.PLAY");this._hidePoster()};a.prototype.onTIMEUPDATE=function(b){var d=this.getDuration(),e=this.getCurrentTime();this.videoPlayer.trigger("progress",b);LOGGING&&e+1>=d&&Log.info(a._LOGTAG,"Video: approaching video end, MediaEvent.TIMEUPDATE: "+e+"/"+d);0<d&&e>=d&&(LOGGING&&Log.info(a._LOGTAG,"Video: reached end, MediaEvent.TIMEUPDATE: "+
e+"/"+d),this.onENDED(b))};a.prototype.onTAP=function(b){LOGGING&&Log.info(a._LOGTAG,"Video: MediaEvent.TAP");this.videoPlayer.trigger("pause",b)};a.prototype.onNetworkError=function(a){com$adobe$ccv$app.ErrorMessages.getInstance(this._config.getConfigValue("rootdir")).getNetworkErrorMsg().showMsg(this.element)};a.prototype.onNetworkResolved=function(a){com$adobe$ccv$app.ErrorMessages.getInstance(this._config.getConfigValue("rootdir")).hideMessages()};a.prototype.createCoreViewOptions=function(a,
d,e,h){return b.prototype.createCoreViewOptions.call(this,a,d,e,h)};a.prototype.changeSize=function(a,b){this.getCoreView()&&this.getCoreView().changeSize(a,b)};a._LOGTAG="VideoJSCloudPlayer";return a}(com$adobe$ccv$app.HTMLCloudPlayer);e.VideoJSCloudPlayer=f})(com$adobe$ccv$videojs||(com$adobe$ccv$videojs={}));
"undefined"!=typeof DataView&&(DataView.prototype.getType=function(e){for(var f=new ArrayBuffer(8),f=new Uint16Array(f),b=0;4>b;++b)f[b]=this.getUint8(e+b);return String.fromCharCode.apply(null,f)},DataView.prototype.getUint64=function(e){var f=this.getUint8(e);e=this.getUint8(e+4);return f<<32|e},DataView.prototype.getString=function(e,f){for(var b=new ArrayBuffer(2*f),b=new Uint16Array(b),a=0;a<f;++a)b[a]=this.getUint8(e+a);return String.fromCharCode.apply(null,b)},DataView.prototype.setType=function(e,
f){if("string"==typeof f)for(var b=0;4>b;++b){var a=f.charCodeAt(b);this.setUint8(e,a);e++}else this.setUint32(e,f),e+=4;return e},DataView.prototype.setString=function(e,f){for(var b=0;b<f.length;++b){var a=f.charCodeAt(b);this.setUint8(e,a);e++}this.setUint8(e,0);e++;return e},DataView.prototype.setUint64=function(e,f){var b=f&4294967295;this.setUint32(e,f>>>32);this.setUint32(e+4,b)},DataView.prototype.reserveBytes=function(e,f){for(var b=0;b<f;b++)this.setUint8(e+b,0);return e+f});var com$adobe$ccv$mp4;
(function(e){var f=function(){return function(a){this.offset=a}}();e.Chunk=f;var b=function(){function a(){this.chunks=[]}a.prototype.addChunk=function(a){this.chunks.push(new f(a))};a.prototype.getChunk=function(a){return this.chunks[a]};a.prototype.size=function(){return this.chunks.length};return a}();e.ChunkTable=b;var a=function(){return function(a){this.offset=0;this.size=a;this.compositionTime=0}}();e.ParserSample=a;b=function(){function b(){this.samples=[]}b.prototype.addSampleOfSize=function(b){this.samples.push(new a(b))};
b.prototype.getSample=function(a){return this.samples[a]};b.prototype.size=function(){return this.samples.length};return b}();e.SampleSizeTable=b;b=function(){function a(){this.syncSamples=[]}a.prototype.addTrackSyncSample=function(a){this.syncSamples.push(a)};a.prototype.getSyncSample=function(a){return this.syncSamples[a]};a.prototype.size=function(){return this.syncSamples.length};return a}();e.TrackSyncSampleTable=b;var c=function(){return function(a,b,k){this.startChunk=a;this.samplesPerChunk=
b;this.sampleDescID=k}}();e.SampleToChunk=c;b=function(){function a(){this.sampleToChunkTable=[]}a.prototype.addSampleToChunk=function(a,b,d){this.sampleToChunkTable.push(new c(a,b,d))};a.prototype.getSampleToChunk=function(a){return this.sampleToChunkTable[a]};a.prototype.size=function(){return this.sampleToChunkTable.length};return a}();e.SampleToChunkTable=b;b=function(){function a(b,k,c,d,e,g,f,l,r){this.a=b;this.b=k;this.u=c;this.c=d;this.d=e;this.v=g;this.x=f;this.y=l;this.w=r}a.prototype.toArray=
function(){return[this.a,this.b,this.u,this.c,this.d,this.v,this.x,this.y,this.w]};return a}();e.TransformationMatrix=b;var d=function(){return function(a,b,k,c,d){this.offset=a;this.size=b;this.startTime=k;this.duration=c;this.compositionTime=d}}();e.Sample=d;b=function(){function a(b){this.sampleIndex=b;this.samples=[]}a.prototype.addSample=function(a,b,c,e,g){this.samples.push(new d(a,b,c,e,g))};a.prototype.getStartSample=function(){return this.sampleIndex};a.prototype.concat=function(a){this.samples=
this.samples.concat(a.getSamples())};a.prototype.getSampleCount=function(){return this.samples.length};a.prototype.getSample=function(a){return this.samples[a]};a.prototype.getSamples=function(){return this.samples};return a}();e.SampleGroup=b;b=function(){function a(){this.sampleGroups=[]}a.prototype.addSampleGroup=function(a){this.sampleGroups.push(a)};a.prototype.concat=function(a){this.sampleGroups=this.sampleGroups.concat(a.getGroups())};a.prototype.getGroups=function(){return this.sampleGroups};
a.prototype.getSampleGroup=function(a){return this.sampleGroups[a]};a.prototype.getSampleGroupsCount=function(){return this.sampleGroups.length};return a}();e.SampleGroupTable=b;b=function(){return function(){this.modificationTime=this.creationTime=this.duration=this.timeScale=this.fileSize=0}}();e.MP4Asset=b})(com$adobe$ccv$mp4||(com$adobe$ccv$mp4={}));
(function(e){function f(a){var b=a>>>16;a&=65535;return 0==a?b:b+a/65535}var b=function(){function a(){}a.prototype.parseHeaders=function(a){var b={},c,d,e;if(!a)return b;a.split("\n").forEach(function(a,h,f){e=a.indexOf(":");c=a.substr(0,e).trim().toLowerCase();d=a.substr(e+1).trim();c&&(b[c]=b[c]?b[c]+", "+d:d)});return b};a.prototype.supportsCORS=function(a){var b=$.Deferred();a=function(a,b){var k=new XMLHttpRequest;k.open(a,b,!0);return k}("GET",a);a.onload=function(){b.resolve(!0)};a.onerror=
function(){b.resolve(!1)};a.setRequestHeader("Range","bytes=0-40");a.responseType="arraybuffer";a.send();return b.promise()};a.prototype.http=function(a){var b=$.Deferred(),c=new XMLHttpRequest;c.open("GET",a.url,!0);c.responseType=a.responseType||"arraybuffer";c.setRequestHeader("Accept","*/*");var d=a.headers,e;if(d)for(e in a.headers)d.hasOwnProperty(e)&&c.setRequestHeader(e,d[e]);c.onload=function(a){b.resolve(c)};c.onerror=function(a){b.reject(c)};c.send();return b.promise()};return a}(),a=function(){function a(b){this._http=
b}a.prototype._greaterOrEqualFileSize=function(b,k,c){void 0===c&&(c=1);var d=$.Deferred();this._http.http({method:"GET",url:b,headers:{Range:"bytes="+k+"-"+(k+c).toString()},responseType:"arraybuffer"}).then(function(c){206==c.status?(LOGGING&&Log.info(a._LOGTAG,"File size "+k+" >= size of "+b),d.resolve(!0)):(LOGGING&&Log.info(a._LOGTAG,"File size "+k+" < size of "+b),d.resolve(!1))},function(){LOGGING&&Log.info(a._LOGTAG,"File size "+k+" < size of "+b);d.resolve(!1)});return d.promise()};a.prototype._getFileSize=
function(a,b,c,d){void 0===d&&(d=1E4);var e=this,f=$.Deferred(),g;if(0>=b)f.reject();else if(b>c)f.resolve(b);else if(b==c)f.resolve(c);else if(c-b<=d)f.resolve(b+Math.round((c-b)/2));else{var l=function(a,b,c){e._getFileSize(a,b,c).then(function(a){f.resolve(a)},function(){f.reject()})};g=b+c>>1;e._greaterOrEqualFileSize(a,g).then(function(d){d?l(a,g+1,c):l(a,b,g-1)},function(){f.reject()})}return f.promise()};a.prototype.getFileSize=function(a,b,c){void 0===b&&(b=0);void 0===c&&(c=5E6);var d=this,
e=$.Deferred();d._greaterOrEqualFileSize(a,c).then(function(f){(f?d.getFileSize(a,c,2*c):d._getFileSize(a,b,c)).then(function(a){e.resolve(a)},function(){e.reject()})},function(){e.reject()});return e.promise()};a._LOGTAG="FileSizeEvaluator";return a}(),c=function(){function b(a){this._http=a}b.prototype._calculateFileSize=function(c,k){var d=$.Deferred(),e=new a(this._http),f=k.videoTrackInfo,u=Math.floor(f.pixelWidth*f.pixelHeight*0.28)*k.duration,f=Math.floor(u-u/2),u=Math.ceil(u+u/2);e.getFileSize(c,
f,u).then(function(a){LOGGING&&Log.warn(b._LOGTAG,"File size for "+c+" is aprox. "+a);k.fileSize=a;d.resolve(k)},function(){d.reject()});return d.promise()};b.prototype.parse=function(a,b){var c=this,d=$.Deferred();c._http.supportsCORS(a).done(function(e){e?c._doParse(a).then(function(a){0<b&&(a.duration=b);d.resolve(a)},function(){d.reject()}):d.reject()});return d.promise()};b.prototype._doParse=function(a){function b(a,k){d.parseSegment(a,0,k).then(function(a){c.resolve(a)},function(a){c.reject()})}
var c=$.Deferred();this.url=a;this.cancelled=!1;this.totalFileSize=this.moovDataSize=0;this.moovFound=!1;this.findMoovProgress=30;this.processMoovProgress=50;this.analyzeProgress=20;this.mp4Asset=new e.MP4Asset;this.parseSegment.bind(this);this.parseType.bind(this);this.getData.bind(this);var d=this;this._http.http({method:"GET",url:this.url,headers:{Range:"bytes=0-"+(56).toString()},responseType:"arraybuffer"}).then(function(c){if(c=d._http.parseHeaders(c.getAllResponseHeaders())["content-range"])c=
c.substring(c.lastIndexOf("/")+1),d.totalFileSize=parseInt(c,10),d.mp4Asset.fileSize=d.totalFileSize;b(a,d.totalFileSize)},function(a){console.error("Request failed:"+a.toString())});return c.promise()};b.prototype.parseSegment=function(a,c,d){var e=this,f=$.Deferred();this.getNextTag(c).then(function(u){e.parseType(u.type,c+8,u.size-8).then(function(q){q?f.resolve(e.mp4Asset):0==d||c+u.size<d?(LOGGING&&Log.info(b._LOGTAG,"Found '"+u.type+"', looking for 'moov'..."),e.parseSegment(a,c+u.size,0<d?
d-u.size:0).then(function(a){f.resolve(a)},function(a){f.reject()})):(LOGGING&&Log.error(b._LOGTAG,"Can't locate 'moov' tag in "+a),f.reject())},function(a){f.reject()})},function(a){f.reject()});return f.promise()};b.prototype.getNextTag=function(a){var b=$.Deferred();this.getData(a,8).then(function(c){var d=new DataView(c.buffer);c=d.getUint32(0);d=d.getType(4);b.resolve({size:c,type:d,offset:a+8})},function(){b.reject()});return b.promise()};b.prototype.getNextTagInDataView=function(a,b){var c=
a.getUint32(b),d=a.getType(b+4);return{size:c,type:d,offset:b+8}};b.prototype.getNextTagOfTypeInDataView=function(a,b,c,d){for(var e=!1;!e;){var f=this.getNextTagInDataView(b,c);if(f.type==a)return f;f.size>=d&&(e=!0);c+=f.size;d-=f.size}};b.prototype.parseType=function(a,b,c){var d=$.Deferred();"moov"==a?(this.moovDataSize=c,this.parseMOOV(b,this.moovDataSize).then(function(){d.resolve(!0)},function(){d.reject()})):d.resolve(!1);return d.promise()};b.prototype.parseMOOV=function(a,b){var c,d,e=$.Deferred(),
f=this,g;this.getData(a,b).then(function(a){a=new DataView(a.buffer);for(var h=0,v=!1;!v;){var s=f.getNextTagInDataView(a,h);f.updateProcessMoovProgress(h);if("mvhd"==s.type)f.parseMVHD(a,h+8,s.size-8);else if("trak"==s.type){var x=f.parseTRAK(a,h+8,s.size-8);x.headerInfo.audio?d=x:x.headerInfo.video&&(c=x)}h+=s.size;b-=s.size;0>=b&&(v=!0)}g=f.analyze(c,d);e.resolve(g)},function(){e.reject()});return e.promise()};b.prototype.parseMVHD=function(a,b,c){var d=b,e=a.getUint8(d),d=d+1+3;0==e?(b=a.getUint32(d),
d+=4):(b=a.getUint64(d),d+=8);0==e?(c=a.getUint32(d),d+=4):(c=a.getUint64(d),d+=8);var f=a.getUint32(d),d=d+4,d=0==e?a.getUint32(d):a.getUint64(d);a.getUint32(20);a.getUint16(24);this.mp4Asset.timeScale=f;this.mp4Asset.duration=d;this.mp4Asset.creationTime=b;this.mp4Asset.modificationTime=c;return this.mp4Asset};b.prototype.parseMDHD=function(a,b){var c={},d=a.getUint8(b);b=b+1+3;0==d?(c.creationTime=a.getUint32(b),b+=4):(c.creationTime=a.getUint64(b),b+=8);0==d?(c.modificationTime=a.getUint32(b),
b+=4):(c.modificationTime=a.getUint64(b),b+=8);c.timeScale=a.getUint32(b);b+=4;c.duration=0==d?a.getUint32(b):a.getUint64(b);return c};b.prototype.parseTKHD=function(a,b){var c={},d=a.getUint8(b);b+=1;var g=a.getUint32(b);if(1==(g>>>8&1)){b+=3;0==d?(c.creationTime=a.getUint32(b),b+=4):(c.creationTime=a.getUint64(b),b+=8);0==d?(c.modificationTime=a.getUint32(b),b+=4):(c.modificationTime=a.getUint64(b),b+=8);c.index=a.getUint32(b);b=b+4+4;0==d?(c.duration=a.getUint32(b),b+=4):(c.duration=a.getUint64(b),
b+=8);b+=8;c.videoLayer=a.getUint16(b);b+=2;b+=2;c.volume=a.getUint16(b);b+=2;b+=2;d=f(a.getUint32(b));b+=4;g=f(a.getUint32(b));b+=4;b+=4;var u=f(a.getUint32(b));b+=4;var q=f(a.getUint32(b));b+=4;b+=4;var l=f(a.getUint32(b));b+=4;var r=f(a.getUint32(b));b+=4;b+=4;c.matrix=new e.TransformationMatrix(d,g,0,u,q,0,l,r,1);c.width=f(a.getUint32(b));b+=4;c.height=f(a.getUint32(b))}return c};b.prototype.parseTRAK=function(a,b,c){for(var d={},e=!1,f=!1,g,l,r,v,s=!1;!s;){var x=this.getNextTagInDataView(a,b);
this.updateProcessMoovProgress(b);"tkhd"==x.type&&(g=this.parseTKHD(a,b+8),d.headerInfo=g);if("mdia"==x.type)for(var p=!1,w=b+8,n=x.size-8;!p;){var D=this.getNextTagInDataView(a,w);this.updateProcessMoovProgress(w);if("hdlr"==D.type){var C=a.getType(w+16);"vide"==C?f=!0:"soun"==C&&(e=!0)}else if("mdhd"==D.type)v=this.parseMDHD(a,w+8),r=v.timeScale,v=v.duration;else if("minf"==D.type){var A=this.getNextTagOfTypeInDataView("stbl",a,w+8,D.size-8);if(void 0!=A)for(var C=!1,z=A.offset,A=A.size-8;!C;){var y=
this.getNextTagInDataView(a,z);this.updateProcessMoovProgress(z);if("stsd"==y.type||"stco"==y.type||"stts"==y.type||"stsc"==y.type||"stsz"==y.type||"stss"==y.type||"ctts"==y.type)"stsd"==y.type?l=this.parseSTSD(a,z+8):"stco"==y.type?d.chunkTable=this.parseSTCO(a,z+8):"stts"==y.type?d.durationTable=this.parseSTTS(a,z+8):"stss"==y.type?d.syncSampleTable=this.parseSTSS(a,z+8):"stsc"==y.type?d.sampleToChunkTable=this.parseSTSC(a,z+8):"stsz"==y.type?d.sampleTable=this.parseSTSZ(a,z+8):"ctts"==y.type&&
(d.compositionTimeToSampleTimeTable=this.parseCTTS(a,z+8,y.size-8));z+=y.size;A-=y.size;0>=A&&(C=!0)}}w+=D.size;n-=D.size;0>=n&&(p=!0)}b+=x.size;c-=x.size;0>=c&&(s=!0)}void 0!=g&&void 0!=l&&(g.format=l.format,g.timeScale=r,g.durationInTrackTimeScale=v,f?(g.video=!0,g.pixelWidth=l.pixelWidth,g.pixelHeight=l.pixelHeight,g.pixelDepth=l.pixelDepth,g.resolutionWidth=l.resolutionWidth,g.resolutionHeight=l.resolutionHeight,g.avcC=l.avcC,g.pasp=l.pasp):void 0!=e&&(g.audio=!0,g.channels=l.channels,g.sampleSize=
l.sampleSize,g.sampleRate=l.sampleRate,g.esds=l.esds));return d};b.prototype.parseCTTS=function(a,b,c){c=[];b+=4;var d=a.getUint32(b);b+=4;for(var e=0;e<d;e++){var f=a.getUint32(b);b+=4;var g=a.getUint32(b);b+=4;for(var l=0;l<f;l++)c.push(g)}return c};b.prototype.parseSTSD=function(a,b){var c=b,d={},e,g;b+=4;for(var q=a.getUint32(b),l=b+=4,r=0;r<q;r++){var v=a.getUint32(b);b+=4;e=a.getType(b);b+=4;if("avc1"==e)for(d.type="video",d.format="avc1",b+=24,d.pixelWidth=a.getUint16(b),b+=2,d.pixelHeight=
a.getUint16(b),b+=2,d.resolutionWidth=f(a.getUint32(b)),b+=4,d.resolutionHeight=f(a.getUint32(b)),b+=4,b+=38,d.pixelDepth=a.getUint16(b),b+=2,b+=2;b<c+v;)e=a.getUint32(b),g=a.getType(b+4),"avcC"==g?d.avcC=this.parseAVCC(a,b+8,e-8):"pasp"==g&&(d.pasp=this.parsePASP(a,b+8,e-8)),b+=e;else"mp4a"==e?(d.type="audio",d.format="mp4a",b+=16,d.channels=a.getUint16(b),b+=2,d.sampleSize=a.getUint16(b),b+=2,b+=4,d.sampleRate=f(a.getUint32(b)),b+=4,b<c+v&&(e=a.getUint32(b),g=a.getType(b+4),"esds"==g&&(d.esds=this.parseESDS(a,
b+8,e-8)))):console.error("UNKNOWN MEDIA FORMAT!!!!!!! "+e);l=b=l+v+4}return d};b.prototype.parseAVCC=function(a,b,c){var d=b,e={};b+=1;e.profile=a.getUint8(b);b+=1;e.compatibleProfiles=a.getUint8(b);b+=1;e.level=a.getUint8(b);b+=1;var f=e.profile.toString(16);"0"==f&&(f="00");var g=e.compatibleProfiles.toString(16);"0"==g&&(g="00");var l=e.level.toString(16);"0"==l&&(l="00");e.codec="avc1."+f+g+l;e.nalLen=a.getUint8(b)&3;b+=1;e.nonOfSPS=a.getUint8(b);b+=1;e.spsLength=a.getUint16(b);b+=2;e.sps=[];
for(f=0;f<e.spsLength;f++)g=a.getUint8(b),b+=1,e.sps.push(g);e.nonOfPPS=a.getUint8(b);b+=1;e.ppsLength=a.getUint16(b);b+=2;e.pps=[];for(f=0;f<e.ppsLength;f++)g=a.getUint8(b),b+=1,e.pps.push(g);e.raw=[];for(b=0;b<c;b++)e.raw.push(a.getUint8(d+b));return e};b.prototype.parseESDS=function(a,b,c){for(var d={codec:"mp4a.40.2",raw:[]},e=0;e<c;e++)d.raw.push(a.getUint8(b+e));return d};b.prototype.parsePASP=function(a,b,c){for(var d={raw:[]},e=0;e<c;e++)d.raw.push(a.getUint8(b+e));return d};b.prototype.parseSTCO=
function(a,b){b+=4;var c=a.getUint32(b);b+=4;for(var d=new e.ChunkTable,f=0;f<c;f++){var g=a.getUint32(b);b+=4;d.addChunk(g)}return d};b.prototype.parseSTTS=function(a,b){var c=[];b+=4;var d=a.getUint32(b);b+=4;for(var e=0;e<d;e++){var f=a.getUint32(b);b+=4;var g=a.getUint32(b);b+=4;for(var l=0;l<f;l++)c.push(g)}return c};b.prototype.parseSTSS=function(a,b){var c=new e.TrackSyncSampleTable;b+=4;for(var d=a.getUint32(b),f=b+4,g=0;g<d;g++)c.addTrackSyncSample(a.getUint32(f)),f+=4;return c};b.prototype.parseSTSC=
function(a,b){var c=new e.SampleToChunkTable;b+=4;for(var d=a.getUint32(b),f=b+4,g=0;g<d;g++){var q=a.getUint32(f),f=f+4,l=a.getUint32(f),f=f+4,r=a.getUint32(f),f=f+4;c.addSampleToChunk(q,l,r)}return c};b.prototype.parseSTSZ=function(a,b){var c=new e.SampleSizeTable;b+=4;var d=a.getUint32(b);b+=4;var f=a.getUint32(b);b+=4;var g;if(0==d)for(d=b,g=0;g<f;g++)c.addSampleOfSize(a.getUint32(d)),d+=4;else for(g=0;g<f;g++)c.addSampleOfSize(d);return c};b.prototype.analyze=function(a,b){this.updateAnalyzeProgress(0);
var c;if(void 0!=a){var d={};c=a.headerInfo;d.videoFormat=c.format;d.videoWidth=c.width;d.videoHeight=c.height;d.pixelWidth=c.pixelWidth;d.pixelHeight=c.pixelHeight;d.pixelDepth=c.pixelDepth;d.resolutionWidth=c.resolutionWidth;d.resolutionHeight=c.resolutionHeight;d.duration=c.duration;d.durationInTrackTimeScale=c.durationInTrackTimeScale;d.transformationMatrix=c.matrix;d.timeScale=c.timeScale;d.codec=c.avcC.codec;d.avcC=c.avcC;d.pasp=c.pasp;d.totalFrames=a.durationTable.length;d.sampleGroupTable=
this.generateSampleGroupTable(a,!0);this.mp4Asset.videoTrackInfo=d}this.updateAnalyzeProgress(50);void 0!=b&&(d={},c=b.headerInfo,d.codec=c.esds.codec,d.audioFormat=c.format,d.audioChannels=c.channels,d.audioSampleSize=c.sampleSize,d.audioSampleRate=c.sampleRate,d.timeScale=c.timeScale,d.totalFrames=b.durationTable.length,d.duration=c.duration,d.volume=c.volume,d.durationInTrackTimeScale=c.durationInTrackTimeScale,d.esds=c.esds,d.sampleGroupTable=this.generateSampleGroupTable(b,!1),this.mp4Asset.audioTrackInfo=
d);this.updateAnalyzeProgress(100);return this.mp4Asset};b.prototype.generateSampleGroupTable=function(a,b){var c=new e.SampleGroupTable,d=a.durationTable.length,f=a.headerInfo.timeScale,g=a.headerInfo.durationInTrackTimeScale/f,q=a.sampleToChunkTable,l=a.chunkTable,r=a.durationTable,v=a.sampleTable,s=a.syncSampleTable,x=a.compositionTimeToSampleTimeTable,p=0,w=0,n;if(void 0!=x)for(p=0;p<x.length;p++)n=v.getSample(p),n.compositionTime=x[p];for(var x=q.size(),D=l.size(),C=0,p=0;p<x;p++){n=q.getSampleToChunk(p);
var A=n.samplesPerChunk;n=n.startChunk;var z;z=p==x-1?D+1:q.getSampleToChunk(p+1).startChunk;for(w=n-1;w<z-1;w++){n=l.getChunk(w);n.startSample=C;n.totalSamples=A;for(var y=n.offset,E=0;E<A;E++)n=v.getSample(C+E),n.offset=y,y+=n.size;C+=A}}l=q=0;if(b)if(void 0!=s)for(n=s.getSyncSample(0)-1,f=s.size(),q=x=0,p=1;p<=f;p++){l=d;p<f&&(l=s.getSyncSample(p)-1);g=new e.SampleGroup(n);for(w=n;w<l;w++)n=v.getSample(w),g.addSample(n.offset,n.size,q,r[x],n.compositionTime),q+=r[x],x++;c.addSampleGroup(g);n=l}else{q=
0;f=Math.floor(g);s=d%f;for(p=0;p<f-1;p++){l=(d-s)/f*p+1;g=new e.SampleGroup(l);for(w=0;w<(d-s)/f;w++)n=v.getSample(l+w),g.addSample(n.offset,n.size,q,r[l+w],n.compositionTime),q+=r[l+w];c.addSampleGroup(g)}l=(d-s)/f*(f-1)+1;g=new e.SampleGroup(l);for(p=l;p<d;p++)n=v.getSample(p),g.addSample(n.offset,n.size,q,r[p],n.compositionTime),q+=r[p];c.addSampleGroup(g)}else{for(p=s=q=0;p<this.mp4Asset.videoTrackInfo.sampleGroupTable.getSampleGroupsCount();p++){n=this.mp4Asset.videoTrackInfo.sampleGroupTable.getSampleGroup(p);
n=n.getSample(n.getSampleCount()-1);w=(n.duration+n.startTime)/this.mp4Asset.videoTrackInfo.timeScale*f;g=new e.SampleGroup(s);for(l=0;q<=w;){n=v.getSample(s+l);if(void 0==n)break;g.addSample(n.offset,n.size,q,r[s+l],n.compositionTime);q+=r[s+l];l++}s+=l;c.addSampleGroup(g)}for(p=s;p<d;p++)n=v.getSample(p),g=c.getSampleGroup(c.getSampleGroupsCount()-1),g.addSample(n.offset,n.size,q,r[p],n.compositionTime),q+=r[p]}return c};b.prototype.updateProcessMoovProgress=function(a){};b.prototype.updateAnalyzeProgress=
function(a){};b.prototype.getData=function(a,b){var c=$.Deferred();this._http.http({method:"GET",url:this.url,headers:{Range:"bytes="+a+"-"+(a+b-1)},responseType:"arraybuffer"}).then(function(a){a=new Uint8Array(a.response);c.resolve(a)},function(){c.reject()});return c.promise()};b._LOGTAG="MP4Parser";return b}(),d=function(){function a(){}a.prototype.parse=function(a,d){var e=new b;return(new c(e)).parse(a,d)};return a}();e.MP4Parser=d})(com$adobe$ccv$mp4||(com$adobe$ccv$mp4={}));
(function(e){var f=function(){function b(){}b.prototype.createMPDHeader=function(a,b){void 0===b&&(b=1550);return'<?xml version="1.0" encoding="UTF-8"?><MPD       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xmlns="urn:mpeg:dash:schema:mpd:2011"       xmlns:xlink="http://www.w3.org/1999/xlink"       xsi:schemaLocation="urn:mpeg:dash:schema:mpd:2011        http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd"       minBufferTime="PT'+(b/1E3).toString()+
'S"       mediaPresentationDuration="PT'+a/1E3+'S"       type="static"       profiles="urn:mpeg:dash:profile:isoff-main:2011">'};b.prototype.createPeriod=function(a,b,d,e,f,k){void 0===e&&(e=0);void 0===f&&(f=467E3);void 0===k&&(k="avc1.4d4015");return'<Period id="'+a.toString()+'" start="PT'+(e/1E3).toString()+'S" duration="PT'+(d/1E3).toString()+'S"><AdaptationSet><Representation mimeType="video/mp4" id="'+a.toString()+'" bandwidth="'+f+'" codecs="'+k+'"><BaseURL>'+b+"</BaseURL></Representation></AdaptationSet></Period>"};
b.prototype.createMP4Url=function(a,b){var d=this.createMPDHeader(b)+this.createPeriod(1,a,b)+"</MPD>",d=new Blob([d],{type:"text/css"});return URL.createObjectURL(d)};b.prototype._createMPDUrlFromInfos=function(a,b){var d=this.createMPDHeader(b),d=d+"<Period>",d=d+"<AdaptationSet>";a.forEach(function(a,b,c){d+='<Representation mimeType="video/mp4" id="'+b.toString()+'" bandwidth="'+a.bandwidth.toString()+'" codecs="'+a.codecs+'" ';a.width&&(d+='width="'+a.width+'" ');a.height&&(d+='height="'+a.height+
'" ');d+=">";d+="<BaseURL>";d+=a.url;d+="</BaseURL>";d+="</Representation>"});var d=d+"</AdaptationSet>",d=d+"</Period>",d=d+"</MPD>",e=new Blob([d],{type:"text/css"});return URL.createObjectURL(e)};b.prototype._kushGaugeBandwidth=function(a,b){void 0===b&&(b=4);var d=a.videoTrackInfo;return Math.floor(d.pixelWidth*d.pixelHeight*b*0.07)};b.prototype._getMP4Info=function(a){var c=this,d=$.Deferred(),e=$(a).attr("src"),f=parseFloat($(a).parent().data("duration"));isNaN(f)&&(f=parseFloat($(a).data("duration")),
isNaN(f)&&(f=0));(new com$adobe$ccv$mp4.MP4Parser).parse(e,f).then(function(a){var f;0==a.duration?(LOGGING&&Log.error(b._LOGTAG,"Can't calculate bandwidth for "+e+", because duration is 0.0"),d.reject()):(0<a.fileSize?(f=Math.floor(a.fileSize/a.duration),LOGGING&&Log.warn(b._LOGTAG,"Bandwidth (file size) = "+f+", file size: "+a.fileSize.toString()+" for "+e)):f=c._kushGaugeBandwidth(a),LOGGING&&Log.warn(b._LOGTAG,"Bandwidth (Kush Gauge) = "+c._kushGaugeBandwidth(a)+", implied file size: "+(c._kushGaugeBandwidth(a)*
a.duration).toString()+" for "+e));d.resolve({url:e,bandwidth:f,codecs:a.videoTrackInfo.codec})},function(){d.reject()});return d.promise()};b.prototype.createMPDUrlFromVideo=function(a,c){var d=this,e=$(a).find("source[type='video/mp4']"),f=$.Deferred(),k=[];e.each(function(a,c){var e=$(c),f=$.Deferred(),h={url:e.attr("src"),bandwidth:e.data("bandwidth"),codecs:e.data("codecs")},g=e.data("width"),r=e.data("height");g&&(h.width=g);r&&(h.height=r);h.bandwidth&&!isNaN(h.bandwidth)&&h.codecs&&h.codecs.length?
f.resolve(h):(LOGGING&&Log.info(b._LOGTAG,"Extracting bandwidth or codecs attribute from "+h.url),d._getMP4Info(e.get(0)).then(function(a){f.resolve(a)},function(){LOGGING&&Log.error(b._LOGTAG,"Missing bandwidth or codecs attribute at "+h.url);f.reject(e)}));k.push(f.promise())});$.when.apply(d,k).then(function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];f.resolve(d._createMPDUrlFromInfos(a,c))},function(){f.reject()});return f.promise()};b.prototype.isDashSupported=function(a){void 0===
a&&(a=window);var b=a.videojs;return b&&b.Dashjs&&!!a.MediaSource&&b.Dashjs.isSupported()&&!DOMUtil.isFireFox(a)};b._LOGTAG="DashUtil";return b}();e.DashUtilStatic=f})(com$adobe$ccv$videojs||(com$adobe$ccv$videojs={}));var DashUtil=new com$adobe$ccv$videojs.DashUtilStatic,DashUtil=DashUtil||null;
(function(e){var f=function(){function b(){}b.prototype.canPlayHLS=function(a){void 0===a&&(a=window);var b=a.navigator.userAgent,d=/Android/i.test(b),e=DOMUtil.getAndroidVersion(a),f=DOMUtil.getIOSVersion(a),f=this.isIOS()&&!isNaN(f)&&11<=f,b=d&&/webkit/i.test(b)&&!isNaN(e)&&4.2>e;return!(DOMUtil.isSafari(a)||this.isIOS()||d)||b||f||DOMUtil.isSamsungDevice(a)?!1:!0};b.prototype.isNativeHlSSupportEnabled=function(){return DOMUtil.isIOS()||DOMUtil.isSafari()||DOMUtil.isFireFoxAndroid()};b.prototype.getVideoFormat=
function(a){var b=new Map;b.set("video/mp4","MP4");b.set("application/x-mpegURL","HLS");return b.get(this.getVideoMimeType(a))};b.prototype.getVideoMimeType=function(a){return a.find("video").find("source").attr("type")};b.prototype._hasExtension=function(a,b){var d=a.toLowerCase();return d.indexOf("."+b)==a.length-b.length-1||0<d.indexOf("."+b+"?")};b.prototype.supportsMP4=function(a,b){void 0===b&&(b=window);return this._hasExtension(a,"mp4")&&!(DOMUtil.isIE(b)&&8==DOMUtil.ieVersion(b))};b.prototype.getTechOrder=
function(a,c,d){void 0===d&&(d=window);if(!c||!c.length)return LOGGING&&Log.info(b._LOGTAG,"Need to reload embed command to get video source"),[];(a=a.getConfigValue("tech"))&&"flash"==a.toLowerCase()?(LOGGING&&Log.info(b._LOGTAG,"Config demands flash, picking [flash, html5]"),c=["flash","html5"]):this.canPlayHLS(d)?(LOGGING&&Log.info(b._LOGTAG,"Can play HLS, picking [html5]"),c=["html5"]):!DOMUtil.isFlashAvailable(d.navigator.mimeTypes)||DOMUtil.isSafari(d)&&!(isNaN(DOMUtil.getOSXVersion(d))||10>
DOMUtil.getOSXVersion(d))||DOMUtil.isChromeDesktop(d)&&(300>DOMUtil.windowInnerHeight(d)||400>DOMUtil.windowInnerWidth(d))?this.supportsMP4(c,d)?(LOGGING&&Log.info(b._LOGTAG,"MP4 is supported, picking [html5, flash], isFireFox="+DOMUtil.isFireFox(d)+", isFlashAvailable="+DOMUtil.isFlashAvailable(d.navigator.mimeTypes)),c=["html5"]):this._hasExtension(c,"mpd")&&DashUtil.isDashSupported(d)?(LOGGING&&Log.info(b._LOGTAG,"Supported by DashJS, picking [dashjs, flash, html5]"),c=["dashjs","html5","flash"]):
(LOGGING&&Log.info(b._LOGTAG,"Didn't find anything suitable, picking []"),c=[]):(LOGGING&&Log.info(b._LOGTAG,"Flash is available, picking [flash]"),c=["flash"]);return c};b._LOGTAG="VideoJSTechDetector";return b}();e.VideoJSTechDetectorStatic=f})(com$adobe$ccv$videojs||(com$adobe$ccv$videojs={}));var VideoJSTechDetector=new com$adobe$ccv$videojs.VideoJSTechDetectorStatic,VideoJSTechDetector=VideoJSTechDetector||null;
(function(e){var f=com$adobe$ccv$dunamis.DunamisEventSender,b=com$adobe$ccv$dunamis.DunamisEventTypes,a=com$adobe$ccv$app.Constants,c=function(d){function c(){d.apply(this,arguments);this._attached=!1}__extends(c,d);c.prototype.getTechOrder=function(a,b){return["html5"]};c.prototype.createCloudPlayer=function(){return new e.VideoJSCloudPlayer};c.prototype.getDuration=function(a){var b=0;a=a.find("video");a.data("duration")&&(b=a.data("duration"),b=isNaN(b)?0:1E3*b);return b};c.prototype._createPlayerForElement=
function(a,b){var d=this;d.config.getConfigValue("rootdir");var e=a.find("video"),f=e.attr("poster")||d.config.getConfigValue("poster");d.authToken&&d.authToken.length&&-1==f.indexOf("Authorization='")?(f+=(0>f.indexOf("?")?"?":"&")+"Authorization="+d.authToken,e.attr("poster",f)):e.attr("poster")||e.attr("poster",f);if(0==b.length)LOGGING&&Log.error(c._LOGTAG,"Can't find any tech to work with"),this.showError();else{var u=this.config.getConfigValue("bgcolor");a.css("background-color",u);$("body").css("background-color",
u);a.find("#video-js").css("background-color",u);this.config.getConfigValue("debug");f={techOrder:b,width:DOMUtil.windowInnerWidth(),height:DOMUtil.windowInnerHeight(),bgcolor:u,poster:f};this._player=null;VideoJSTechDetector.isNativeHlSSupportEnabled()||(videojs.options.hls.overrideNative=!0,videojs.options.html5.nativeAudioTracks=!1,videojs.options.html5.nativeVideoTracks=!1,videojs.options.html5.nativeTextTracks=!1);var q=!1;videojs(e.get(0),f).ready(function(){function a(){LOGGING&&Log.info(c._LOGTAG,
"*** handleFirstPlay");h||(LOGGING&&Log.info(c._LOGTAG,"*** handleFirstPlay: setTimeout()"),h=setTimeout(function(){clearTimeout(h);h=0;e.off(VideoJSEvents.PLAY,a);d.onFirstPlay()},50))}function b(){LOGGING&&Log.info(c._LOGTAG,"*** handleFirstPause");h&&(clearTimeout(h),h=0,LOGGING&&Log.info(c._LOGTAG,"*** handleFirstPause: clearTimeout(playTimer);"));e.off(VideoJSEvents.PAUSE,b)}q=!0;d.hideErrors();var e=this,f=d.createCloudPlayer();d._player=e;d._cloudPlayer=f;f.setVideoJSPlayer(e);f.registerLoggerOnTimeUpdate(com$adobe$ccv$app.RenditionLogger.getInstance());
f.attachTo(d.element,d.config,"","",d.videoWidth,d.videoHeight,d.rootdir);var h=0;e.on(VideoJSEvents.PLAY,a);e.on(VideoJSEvents.PAUSE,b)});q||setTimeout(function(){if(!q){var a=null;DOMUtil.isAndroid()||DOMUtil.isIOSDevice()||(a=com$adobe$ccv$app.ErrorMessages.getInstance(d.rootdir).getFlashPlayerMsg());d.showError(a)}},3E3)}};c.prototype.createPlayer=function(a){function b(a,c){var f=d.getTechOrder(a);d._createPlayerForElement(a,f);e.resolve(d)}var d=this,e=$.Deferred(),f;(f=this.getWWWHost(a))&&
f.length&&(f+="/info");window.ccv$serverData&&window.ccv$serverData.minframeHeight&&window.ccv$serverData.minframeWidth&&window.ccv$serverData.duration?(d.config.setConfigValue("minframeWidth",window.ccv$serverData.minframeWidth.toString()),d.config.setConfigValue("minframeHeight",window.ccv$serverData.minframeHeight.toString()),b(a,window.ccv$serverData.duration)):f?this.getAuthorizedJSON(f).then(function(c){d.config.setConfigValue("minframeWidth",c.minframe.width.toString());d.config.setConfigValue("minframeHeight",
c.minframe.height.toString());b(a,c.duration)}).fail(function(){LOGGING&&Log.error(c._LOGTAG,"Failed to retrieve info"+f);e.reject()}):b(a,this.getDuration(a));return e.promise()};c.prototype.getWWWHost=function(a){return a.find("video").first().data("wwwhost")};c.prototype.createWrapper=function(a){var b=$("<div></div>");b.addClass("html5-video-wrapper");b.data("status",a.data("status")||"ok");b.data("rootdir",a.data("rootdir")||"/");var c,d,e=a.data();for(c in e)e.hasOwnProperty(c)&&(d=e[c],b.data(c,
d),a.removeData(c));c=$("<div></div>");c.attr("id","html5-video-holder");c.append(a);a.addClass("video-js");a.data("account","2869242976001");a.data("player","7e1cd48d-2db9-4901-acc5-63e50cdec4ca");a.data("embed","default");a.data("id","");a=$("<div></div>");a.attr("id","video-surface");DOMUtil.isAndroidInternetBrowser()&&(a.css("background-color","transparent"),$("meta[name=viewport]").attr("content","minimum-scale=1.0,maximum-scale=1.0,user-scalable=yes"));c.append(a);d=$("<div></div>");d.attr("id",
"videocontrols");c.append(d);DOMUtil.isIPhone()||(d=$('<div class="spinnerwrap" id="spinner-control"> <div class="spinner"><div class="circle-clipper left"><div class="circle"></div></div><div class="circle-clipper right"> <div class="circle"></div> </div> </div> <div class="track"></div> </div>'),a.append(d));a=$("<div></div>");a.addClass("startcover");a.attr("id","startcover");c.append(a);a=$("<div></div>");a.attr("id","html5-video-poster");c.append(a);a=$("<div></div>");a.attr("id","messages");
a.addClass("message-container");c.append(a);b.append(c);return b};c.prototype.attachToVideoElement=function(a){var b=$(a);a=b.parent();b=this.createWrapper(b);a.append(b);return this.loadPlayer(b)};c.prototype.updateSource=function(b){if(DOMUtil.isSafari()||DOMUtil.isIOS()||DOMUtil.isFireFoxAndroid()){var c=b.find("video").first();if(c&&(c=c.find("source[type='application/x-mpegURL']"))&&0<c.length){var d=c[0].src,e=d.indexOf("?"),f={};f[a.WWW_PROXY_PLAYBACK_QUERY]=d.substring(0,e);f[a.WWW_PROXY_TOKEN_QUERY]=
d.substr(e+1);d=jQuery.param(f);b=this.getWWWHost(b);e=document.createElement("a");e.setAttribute("href",b);c[0].src=e.protocol+"//"+e.hostname+a.WWW_API_MANIFEST_ENDPOINT+"?"+d}}};c.prototype.loadPlayer=function(a){this.createConfiguration(a);this.updateSource(a);VideoProperties.setProperties(a,this.config);this.dunamisEventSender=f.getInstance(this.config);this.dunamisEventSender.sendEvent(DunamisEventFactory.getEvent(b.RENDER));var c=this.config.isConfigOptionEnabled("lazyLoading"),d=a.find("video");
d.css("background-color","transparent");if(c){var e=this,c=$(".html5-video-wrapper");d.attr("preload","none");var g=$.Deferred(),d=this.config.getConfigValue("poster");$("#html5-video-poster").css("background-image","url("+d+")");$("#html5-video-holder").addClass("idle");c.on("click",function(b){b.preventDefault();e.attachTo(a).done(function(a){g.resolve(a)}).fail(function(){g.reject()})});return g.promise()}d.attr("preload","auto");return this.attachTo(a)};c.prototype.attachTo=function(a){var b=
$.Deferred();this._attached||!a.length?b.reject():(this._attached=!0,LOGGING&&com$adobe$ccv$logging.ConsoleLogger.isAvailable()&&Log.addLogger(new ConsoleLogger(c._LOGTAG)),LoadTypekit.run(),document.title="Creative Cloud Player "+com$adobe$ccv$app.Version.getVersion(),this.processPage(a).done(function(a){b.resolve(a)}).fail(function(){b.reject()}));return b.promise()};c.prototype.onSizeChange=function(a){this._cloudPlayer&&this._cloudPlayer.changeSize(DOMUtil.windowInnerWidth(),DOMUtil.windowInnerHeight())};
c._LOGTAG="VideoJSPlayerApp";return c}(com$adobe$ccv$app.PlayerApp);e.VideoJSPlayerApp=c})(com$adobe$ccv$videojs||(com$adobe$ccv$videojs={}));var DUNAMIS_DEV="dev",DUNAMIS_STAGE="stage",DUNAMIS_PROD="prod",CCV_TO_DUNAMIS_ENV_MAP={dev:DUNAMIS_STAGE,stage:DUNAMIS_STAGE,prod:DUNAMIS_PROD},VISITOR_ORG_ID="44FD596D5707FFAC7F000101@AdobeOrg",SOURCE_CLIENT_ID="CreativeCloudSDK";
(function(e){var f=function(){function b(){}b.prototype.init=function(a){var b=CCV_TO_DUNAMIS_ENV_MAP[a.env]||DUNAMIS_STAGE;this.getVisitorID();b={ENVIRONMENT:b,ALLOW_NO_TOKEN:!0,ANALYTICS_API_KEY:a.apiKey,ANALYTICS_PROJECT:a.project,ANALYTICS_X_PRODUCT:a.xProduct,ANALYTICS_MAX_QUEUED_EVENTS:50,ANALYTICS_DEBOUNCE:10,ANALYTICS_USER_REGION:"UNKNOWN",ANALYTICS_INGEST_TYPE:"dunamis",TIMESTAMP_PROPERTY_NAME:"event.dts_end"};this.clientAppName=a.clientAppName;this.analyticsLib=new Ingest({getAccessToken:function(a){a(null,
"")}},b);this.analyticsLib.enable(!0)};b.prototype.send=function(a){a={"event.context_guid":a.ccvId,"event.visitor_guid":this.getVisitorID(),"event.type":"play","content.name":a.renditionName+"px","content.id":a.ccvId,"event.dts_end":(new Date).toISOString(),"event.workflow":"view","event.category":"SERVICE","event.subcategory":"rendition","event.subtype":"rendition","event.user_agent":window.navigator.userAgent,"source.client_id":SOURCE_CLIENT_ID,"source.name":this.clientAppName,"source.version":"1.0.0.0",
"trn.number":this.generateGUID(),"trn.product":a.renditionName+"px","trn.quantity":a.count,"trn.amount":0};this.analyticsLib.postEvent(a,function(a,b){})};b.prototype.generateGUID=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};b.prototype.getVisitorID=function(){try{return window.Visitor.getInstance(VISITOR_ORG_ID).getMarketingCloudVisitorID()}catch(a){return""}};b.getInstance=function(){null==
e.DunamisAnalytics.instance&&(b.instance=new e.DunamisAnalytics);return b.instance};return b}();e.DunamisAnalytics=f})(com$adobe$ccv$app||(com$adobe$ccv$app={}));
(function(e){var f=e.DunamisAnalytics,b=function(){function a(){this.maxResolution=-1;this.ccvId=""}a.prototype.init=function(a){var b=this;b.renditionBuffered={};b.segmentPlaying={};$(document).on("loadingSegment",function(a,c){b.renditionBuffered[c.mediaIndex]=c.renditionUsed});$(document).on("maxResolution",function(a,c){b.maxResolution=-1==c?b.maxResolution:c});this.analyticsHook=f.getInstance();this.analyticsHook.init({env:a.env,apiKey:"ccv-service",project:"ccv-service",xProduct:"ccv-service",
clientAppName:a.clientAppName});setInterval(function(){b.sendRenditionLogsToAnalytics()},3E4)};a.prototype.setCCVID=function(a){this.ccvId=a};a.prototype.sendRenditionLogsToAnalytics=function(){try{if(this.ccvId&&0<Object.keys(this.renditionBuffered).length&&0<Object.keys(this.segmentPlaying).length){var a=[],b=Date.now(),e={},f;for(f in this.segmentPlaying)this.renditionBuffered[f]&&6E3<b-this.segmentPlaying[f]&&(e[this.renditionBuffered[f]]=e[this.renditionBuffered[f]]?e[this.renditionBuffered[f]]+
1:1,a.push(f));for(var k in e)this.analyticsHook.send({renditionName:k,count:e[k],ccvId:this.ccvId});for(b=0;b<a.length;b++)delete this.segmentPlaying[a[b]]}}catch(m){console.warn("Error in sending logs")}};a.prototype.onTIMEUPDATE=function(a){a=parseInt(a/6);this.segmentPlaying[a]||(this.segmentPlaying[a]=Date.now())};a.prototype.onVideoPaused=function(a){a=parseInt(a/6);this.segmentPlaying[a]&&delete this.segmentPlaying[a]};a.getInstance=function(){null==e.RenditionLogger.instance&&(a.instance=
new e.RenditionLogger);return a.instance};return a}();e.RenditionLogger=b})(com$adobe$ccv$app||(com$adobe$ccv$app={}));(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.startRenditionLogger=function(a,b,e){a.init({env:b,clientAppName:e})};a.prototype.setCCVIdInLogger=function(a,b){a.setCCVID(b)};return a}(e.VideoJSPlayerApp);e.VideoJSApp=f})(com$adobe$ccv$videojs||(com$adobe$ccv$videojs={}));var CCVVideoJSApp=new com$adobe$ccv$videojs.VideoJSApp;
$(function(e){function f(b){0<b.length&&(a=b.data("env"),c=b.data("clientappname"));CCVVideoJSApp.startRenditionLogger(com$adobe$ccv$app.RenditionLogger.getInstance(),a,c)}var b=e(".html5-video-wrapper"),a="dev",c="";b.length?(e=b.find("video"),f(e),CCVVideoJSApp.loadPlayer(b).done(function(){CCVVideoJSApp.setCCVIdInLogger(com$adobe$ccv$app.RenditionLogger.getInstance(),CCVVideoJSApp.ccvID)}).fail(function(){LOGGING&&Log.error(com$adobe$ccv$videojs.VideoJSApp._LOGTAG,"Failed to create CCV Player for .html5-video-wrapper")})):
(e=e("video"),f(e),e.hasClass("video-js")&&CCVVideoJSApp.attachToVideoElement(e.get(0)).done(function(){CCVVideoJSApp.setCCVIdInLogger(com$adobe$ccv$app.RenditionLogger.getInstance(),CCVVideoJSApp.ccvID)}).fail(function(){LOGGING&&Log.error(com$adobe$ccv$videojs.VideoJSApp._LOGTAG,"Failed to create CCV Player")}))});
